<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Master - 数独大师 | 免费在线数独游戏</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Sudoku Master 免费游玩简单至行家级别的数独游戏。我们的数独网适用于所有浏览器及不同种类的移动式设备。根据困难度选择一个数独拼图并开始享受游戏的乐趣吧！">
    <meta name="keywords" content="数独游戏,sudoku,在线数独,免费数独,数独大师,sudoku master,数独拼图,逻辑游戏,益智游戏,数字游戏,brain training,puzzle game,daily sudoku,数独挑战,数独解谜">
    <meta name="author" content="Sudoku Master Team">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sudoku-masterr.com/">
    <meta property="og:title" content="Sudoku Master - 数独大师 | 免费在线数独游戏">
    <meta property="og:description" content="免费在线数独游戏，支持简单至专家级别的四种难度。适用于所有浏览器和移动设备，提供每日挑战、智能提示、多语言支持等丰富功能。">
    <meta property="og:image" content="https://sudoku-masterr.com/assets/sudoku-master-preview.png">
    <meta property="og:locale" content="zh_CN">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://sudoku-masterr.com/">
    <meta property="twitter:title" content="Sudoku Master - 数独大师 | 免费在线数独游戏">
    <meta property="twitter:description" content="免费在线数独游戏，支持四种难度等级，适用于所有设备。提供每日挑战、智能提示等功能，享受数独解谜乐趣！">
    <meta property="twitter:image" content="https://sudoku-masterr.com/assets/sudoku-master-preview.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Sudoku Master",
        "alternateName": "数独大师",
        "description": "Sudoku Master 免费游玩简单至行家级别的数独游戏。我们的数独网适用于所有浏览器及不同种类的移动式设备。根据困难度选择一个数独拼图并开始享受游戏的乐趣吧！",
        "url": "https://sudoku-masterr.com",
        "applicationCategory": "Game",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "inLanguage": ["zh-CN", "en-US", "ja-JP", "de-DE", "hi-IN", "ru-RU", "fr-FR"]
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans CJK SC', sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%);
            color: #2F1B14;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Navigation */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(139, 69, 19, 0.95);
            padding: 15px 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 1000;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #F5DEB3;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header-center {
            display: flex;
            gap: 30px;
            align-items: center;
            color: #F5DEB3;
            font-size: 16px;
            font-weight: 500;
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .nav-btn {
            background: rgba(245, 222, 179, 0.2);
            border: 2px solid rgba(245, 222, 179, 0.3);
            color: #F5DEB3;
            padding: 8px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-btn:hover {
            background: rgba(245, 222, 179, 0.3);
            border-color: rgba(245, 222, 179, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-btn.active {
            background: #D2691E;
            border-color: #D2691E;
            color: white;
        }

        .language-selector {
            background: #D2691E;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .language-selector:hover {
            background: #FF8C00;
            transform: translateY(-2px);
        }

        .language-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(245, 222, 179, 0.2);
            border: 2px solid rgba(245, 222, 179, 0.3);
            border-radius: 10px;
            padding: 8px 12px;
            transition: all 0.3s ease;
        }

        .language-wrapper:hover {
            background: rgba(245, 222, 179, 0.3);
            border-color: rgba(245, 222, 179, 0.5);
        }

        .language-icon {
            font-size: 16px;
            color: #F5DEB3;
        }

        .language-wrapper .language-selector {
            background: transparent;
            border: none;
            padding: 0;
            color: #F5DEB3;
            font-size: 14px;
            font-weight: 600;
        }

        .language-wrapper .language-selector:hover {
            background: transparent;
            transform: none;
        }

        /* Page System */
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Main Game Page */
        .game-container {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
            margin-bottom: 30px;
        }

        .sudoku-board {
            background: rgba(245, 222, 179, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 2px;
            background: #8B4513;
            padding: 12px;
            border-radius: 12px;
            max-width: 480px;
            margin: 0 auto;
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .cell {
            aspect-ratio: 1;
            background: #FFF8DC;
            border: 2px solid #D2691E;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border-radius: 4px;
        }

        .cell:hover {
            background: #FFE4B5;
            transform: scale(1.05);
            z-index: 10;
        }

        .cell.selected {
            background: #FF8C00;
            color: white;
            box-shadow: 0 0 20px rgba(255, 140, 0, 0.6);
        }

        .cell.highlight {
            background: #DEB887;
        }

        .cell.error {
            background: #FF6B6B;
            color: white;
            animation: shake 0.5s ease-in-out;
        }

        .cell.given {
            background: #D2B48C;
            color: #8B4513;
            font-weight: bold;
        }

        .pencil-marks {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            font-size: 8px;
            color: #666;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Control Panel */
        .control-panel {
            background: rgba(245, 222, 179, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .number-pad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .number-btn {
            background: linear-gradient(135deg, #D2691E, #B8860B);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .number-btn:hover {
            background: linear-gradient(135deg, #FF8C00, #DAA520);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(210, 105, 30, 0.4);
        }

        .number-btn.selected {
            background: linear-gradient(135deg, #FF8C00, #DAA520);
            box-shadow: 0 0 20px rgba(255, 140, 0, 0.6);
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 25px;
        }

        .action-btn {
            background: linear-gradient(135deg, #8B4513, #A0522D);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        .action-btn:hover {
            background: linear-gradient(135deg, #A0522D, #CD853F);
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.3);
        }

        .action-btn.active {
            background: linear-gradient(135deg, #FF8C00, #DAA520);
            box-shadow: 0 0 15px rgba(255, 140, 0, 0.4);
            color: white;
        }

        .new-game-btn {
            background: linear-gradient(135deg, #FF8C00, #D2691E);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(255, 140, 0, 0.3);
        }

        .new-game-btn:hover {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 140, 0, 0.5);
        }

        .continue-game-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 15px;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .continue-game-btn:hover {
            background: linear-gradient(135deg, #5CBF60, #4CAF50);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .continue-icon {
            font-size: 20px;
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .continue-info {
            flex: 1;
            text-align: left;
        }

        .continue-text {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 3px;
        }

        .continue-details {
            font-size: 11px;
            opacity: 0.9;
        }

        /* Stats Display */
        .stats-display {
            background: rgba(139, 69, 19, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid rgba(139, 69, 19, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #A0522D;
            font-weight: 600;
        }

        /* Bottom Info Section */
        .bottom-info {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-top: 30px;
        }

        .info-card {
            background: rgba(245, 222, 179, 0.95);
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .collapsible-info {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .collapsible-info:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .info-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .info-content.expanded {
            max-height: 500px;
            margin-top: 20px;
        }

        .info-toggle {
            float: right;
            transition: transform 0.3s ease;
        }

        .info-toggle.rotated {
            transform: rotate(180deg);
        }

        /* Daily Challenge Page */
        .challenge-page {
            max-width: 800px;
            margin: 0 auto;
        }

        .challenge-header {
            background: linear-gradient(135deg, #FF8C00, #D2691E);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(255, 140, 0, 0.3);
        }

        .challenge-date {
            font-size: 18px;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .challenge-title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .challenge-countdown {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 20px;
            font-weight: bold;
            margin: 20px auto;
            display: inline-block;
        }

        .challenge-progress {
            background: rgba(255, 255, 255, 0.2);
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .challenge-progress-bar {
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            transition: width 1s ease;
            border-radius: 4px;
        }

        .challenge-start-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .challenge-start-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .challenge-start-btn.completed {
            background: rgba(76, 175, 80, 0.8);
            border-color: rgba(76, 175, 80, 1);
        }

        /* Trophy System Page */
        .trophy-page {
            max-width: 1000px;
            margin: 0 auto;
        }

        .trophy-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .trophy-header h1 {
            font-size: 42px;
            color: #8B4513;
            margin-bottom: 15px;
        }

        .user-summary {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 30px;
            align-items: center;
            background: rgba(245, 222, 179, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #FF8C00, #D2691E);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: white;
        }

        .user-info h2 {
            font-size: 24px;
            color: #8B4513;
            margin-bottom: 10px;
        }

        .star-count {
            font-size: 48px;
            font-weight: bold;
            color: #FF8C00;
            text-align: center;
        }

        .trophy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .trophy-item {
            background: rgba(245, 222, 179, 0.95);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .trophy-item.unlocked {
            border-color: #4CAF50;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
        }

        .trophy-item.locked {
            opacity: 0.6;
            border-color: #ccc;
        }

        .trophy-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .trophy-icon {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }

        .trophy-name {
            font-size: 20px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 10px;
        }

        .trophy-description {
            font-size: 14px;
            color: #A0522D;
            margin-bottom: 15px;
        }

        .trophy-progress {
            background: #e0e0e0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .trophy-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 0.5s ease;
        }

        .trophy-reward {
            background: rgba(255, 140, 0, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            color: #FF8C00;
            font-weight: bold;
            display: inline-block;
        }

        /* Shop Page */
        .shop-page {
            max-width: 1000px;
            margin: 0 auto;
        }

        .shop-header {
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .shop-balance {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .shop-item {
            background: rgba(245, 222, 179, 0.95);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .shop-item:hover {
            transform: translateY(-5px);
            border-color: #FF8C00;
            box-shadow: 0 15px 40px rgba(255, 140, 0, 0.3);
        }

        .shop-item-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .shop-item-name {
            font-size: 20px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 10px;
        }

        .shop-item-description {
            font-size: 14px;
            color: #A0522D;
            margin-bottom: 20px;
        }

        .shop-item-price {
            background: rgba(255, 140, 0, 0.1);
            padding: 10px 20px;
            border-radius: 20px;
            color: #FF8C00;
            font-weight: bold;
            margin-bottom: 15px;
            display: inline-block;
        }

        .shop-buy-btn {
            background: linear-gradient(135deg, #FF8C00, #D2691E);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
        }

        .shop-buy-btn:hover {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            transform: translateY(-2px);
        }

        .shop-buy-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        /* Settings Page */
        .settings-page {
            max-width: 800px;
            margin: 0 auto;
        }

        .settings-section {
            background: rgba(245, 222, 179, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .settings-section h2 {
            color: #8B4513;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(139, 69, 19, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            font-weight: 600;
            color: #8B4513;
        }

        .setting-control {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: #ccc;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #4CAF50;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active::after {
            transform: translateX(25px);
        }

        .theme-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
        }

        .theme-option {
            aspect-ratio: 1;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
        }

        .theme-option.active {
            border-color: #FF8C00;
            box-shadow: 0 0 20px rgba(255, 140, 0, 0.3);
        }

        .theme-option:hover {
            transform: scale(1.05);
        }

        .theme-a { background: linear-gradient(135deg, #8B4513, #CD853F); }
        .theme-b { background: linear-gradient(135deg, #A0522D, #DEB887); }
        .theme-c { background: linear-gradient(135deg, #D2691E, #F5DEB3); }

        .keyboard-shortcuts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background: rgba(139, 69, 19, 0.1);
            border-radius: 8px;
        }

        .shortcut-key {
            background: #8B4513;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .main-game-area {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .header-right {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .cell {
                font-size: 18px;
            }
            
            .number-btn {
                padding: 14px;
                font-size: 16px;
            }
            
            .daily-section {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .daily-challenge-btn {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .challenge-icon {
                font-size: 24px;
            }

            .info-content.expanded {
                padding: 20px;
                max-height: 1500px;
            }

            .rules-grid,
            .tips-container,
            .features-grid {
                grid-template-columns: 1fr;
            }

            .tip-category {
                padding: 15px;
            }

            .trophy-grid,
            .shop-grid {
                grid-template-columns: 1fr;
            }

            .user-summary {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 20px;
            }

            .info-header {
                padding: 20px;
            }

            .info-header h3 {
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 10px 15px;
            }

            .logo {
                font-size: 24px;
            }

            .header-center {
                gap: 20px;
                font-size: 14px;
            }

            .nav-btn {
                padding: 6px 12px;
                font-size: 13px;
            }

            .main-game-area {
                gap: 15px;
            }

            .sudoku-board-container,
            .game-controls {
                padding: 20px;
            }

            .board {
                padding: 8px;
                gap: 1px;
            }

            .cell {
                font-size: 16px;
                border-width: 1px;
            }

            .number-btn {
                padding: 12px;
                font-size: 14px;
            }

            .daily-challenge-btn {
                padding: 15px;
            }

            .challenge-text {
                font-size: 16px;
            }

            .streak-display {
                padding: 15px;
            }

            .streak-text {
                font-size: 14px;
            }

            .info-header {
                padding: 15px;
            }

            .info-header h3 {
                font-size: 18px;
            }

            .info-content.expanded {
                padding: 15px;
            }

            .info-content h4 {
                font-size: 18px;
            }
        }

        /* Animations */
        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            80% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .success-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 40px;
            border-radius: 20px;
            font-size: 28px;
            font-weight: bold;
            z-index: 3000;
            animation: successPop 2s ease-in-out;
            text-align: center;
        }

        @keyframes successPop {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #F5DEB3;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            width: 90%;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
            color: #8B4513;
        }

        .difficulty-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .difficulty-btn {
            background: linear-gradient(135deg, #D2691E, #B8860B);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .difficulty-btn:hover {
            background: linear-gradient(135deg, #FF8C00, #DAA520);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 140, 0, 0.4);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #8B4513;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: #FF8C00;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            transform: translateX(120%);
            transition: transform 0.5s ease;
            z-index: 3000;
            font-weight: 600;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: linear-gradient(135deg, #f44336, #d32f2f);
        }

        .notification.warning {
            background: linear-gradient(135deg, #FF8C00, #D2691E);
        }

        /* Main Game Area */
        .main-game-area {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 30px;
            margin-bottom: 30px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .sudoku-board-container {
            background: rgba(245, 222, 179, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .game-controls {
            background: rgba(245, 222, 179, 0.95);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Daily Challenge & Streak Section */
        .daily-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .daily-challenge-entry {
            background: rgba(245, 222, 179, 0.95);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .daily-challenge-btn {
            width: 100%;
            background: linear-gradient(135deg, #FF8C00, #D2691E);
            border: none;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .daily-challenge-btn:hover {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 140, 0, 0.4);
        }

        .challenge-status {
            text-align: left;
        }

        .challenge-text {
            display: block;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .challenge-date {
            display: block;
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 3px;
        }

        .challenge-status-text {
            font-size: 14px;
            opacity: 0.9;
        }

        .challenge-icon {
            font-size: 32px;
        }

        .streak-display {
            background: rgba(245, 222, 179, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #8B4513;
        }

        .streak-text {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .streak-text span {
            color: #FF8C00;
            font-weight: bold;
            font-size: 20px;
        }

        .streak-icon {
            font-size: 28px;
            animation: pulse 2s infinite;
        }

        /* Expandable Information Section */
        .info-section {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(245, 222, 179, 0.95);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .info-header {
            padding: 25px 30px;
            background: linear-gradient(135deg, #8B4513, #A0522D);
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .info-header:hover {
            background: linear-gradient(135deg, #A0522D, #CD853F);
        }

        .info-header h3 {
            margin: 0;
            font-size: 24px;
            font-weight: bold;
        }

        .toggle-icon {
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .toggle-icon.rotated {
            transform: rotate(180deg);
        }

        .info-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            padding: 0 30px;
        }

        .info-content.expanded {
            max-height: 2000px;
            padding: 30px;
        }

        .info-content h4 {
            color: #8B4513;
            font-size: 20px;
            margin-bottom: 15px;
            margin-top: 25px;
            border-bottom: 2px solid rgba(139, 69, 19, 0.2);
            padding-bottom: 8px;
        }

        .info-content h4:first-child {
            margin-top: 0;
        }

        .info-benefits ul {
            list-style: none;
            padding: 0;
        }

        .info-benefits li {
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(139, 69, 19, 0.05);
            border-radius: 8px;
            border-left: 4px solid #FF8C00;
        }

        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .rule-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(139, 69, 19, 0.05);
            border-radius: 10px;
            border: 2px solid rgba(139, 69, 19, 0.1);
        }

        .rule-icon {
            font-size: 24px;
            min-width: 24px;
        }

        .rule-text {
            color: #8B4513;
            font-size: 14px;
        }

        .tips-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .tip-category {
            background: rgba(139, 69, 19, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid rgba(139, 69, 19, 0.1);
        }

        .tip-category h5 {
            color: #D2691E;
            font-size: 16px;
            margin-bottom: 12px;
            font-weight: bold;
        }

        .tip-category ul {
            list-style: none;
            padding: 0;
        }

        .tip-category li {
            margin-bottom: 8px;
            font-size: 14px;
            color: #8B4513;
            line-height: 1.4;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 15px;
            background: rgba(255, 140, 0, 0.1);
            border-radius: 10px;
            border: 2px solid rgba(255, 140, 0, 0.2);
        }

        .feature-icon {
            font-size: 20px;
            min-width: 20px;
            margin-top: 2px;
        }

        .feature-text {
            color: #8B4513;
            font-size: 14px;
            line-height: 1.4;
        }

        .difficulty-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .difficulty-option {
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .difficulty-option:hover {
            background-color: #FF8C00;
        }

        .difficulty-name {
            font-weight: bold;
        }

        .difficulty-desc {
            font-size: 14px;
            color: #A0522D;
        }

        .dropdown-arrow {
            transition: transform 0.3s ease;
        }

        .dropdown-arrow.rotated {
            transform: rotate(180deg);
        }

        .difficulty-dropdown {
            position: absolute;
            background-color: #F5DEB3;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 10px;
            margin-top: 5px;
        }

        .difficulty-option {
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .difficulty-option:hover {
            background-color: #FF8C00;
        }

        .header-center {
            display: flex;
            gap: 30px;
            align-items: center;
            color: #F5DEB3;
            font-size: 16px;
            font-weight: 500;
        }

        .difficulty-selector {
            position: relative;
            display: inline-block;
            z-index: 2000;
        }

        .difficulty-btn-header {
            background: rgba(245, 222, 179, 0.2);
            border: 2px solid rgba(245, 222, 179, 0.3);
            color: #F5DEB3;
            padding: 8px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 100px;
            justify-content: space-between;
            position: relative;
            z-index: 2001;
        }

        .difficulty-btn-header:hover {
            background: rgba(245, 222, 179, 0.3);
            border-color: rgba(245, 222, 179, 0.5);
            transform: translateY(-2px);
        }

        .difficulty-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(245, 222, 179, 0.98);
            border: 2px solid rgba(139, 69, 19, 0.3);
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            z-index: 2002;
            margin-top: 5px;
            overflow: hidden;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .difficulty-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .difficulty-option {
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(139, 69, 19, 0.1);
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .difficulty-option:last-child {
            border-bottom: none;
        }

        .difficulty-option:hover {
            background: rgba(255, 140, 0, 0.2);
            color: #8B4513;
        }

        .difficulty-name {
            font-weight: bold;
            font-size: 14px;
            color: #8B4513;
        }

        .difficulty-desc {
            font-size: 11px;
            color: #A0522D;
            opacity: 0.8;
        }

        .dropdown-arrow {
            transition: transform 0.3s ease;
            font-size: 12px;
        }

        .dropdown-arrow.rotated {
            transform: rotate(180deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Navigation -->
        <div class="header">
            <div class="logo">🧩 Sudoku Master</div>
            <div class="header-center">
                <div id="timer">00:00</div>
                <div class="difficulty-selector">
                    <button class="difficulty-btn-header" id="difficultySelector">
                        <span id="currentDifficulty">简单</span>
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <div class="difficulty-dropdown" id="difficultyDropdown">
                        <div class="difficulty-option" data-difficulty="easy">
                            <span class="difficulty-name">🌱 简单</span>
                            <span class="difficulty-desc">新手入门</span>
                        </div>
                        <div class="difficulty-option" data-difficulty="medium">
                            <span class="difficulty-name">🌿 中等</span>
                            <span class="difficulty-desc">适度挑战</span>
                        </div>
                        <div class="difficulty-option" data-difficulty="hard">
                            <span class="difficulty-name">🌳 困难</span>
                            <span class="difficulty-desc">高级玩家</span>
                        </div>
                        <div class="difficulty-option" data-difficulty="expert">
                            <span class="difficulty-name">🔥 专家</span>
                            <span class="difficulty-desc">数独大师</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <button class="nav-btn" id="dailyChallengeNav" data-page="challenge">每日挑战</button>
                <button class="nav-btn" id="trophyNav" data-page="trophy">打卡与奖励</button>
                <button class="nav-btn" id="shopNav" data-page="shop">商店与兑换</button>
                <div class="language-wrapper">
                    <span class="language-icon">🌍</span>
                    <select class="language-selector" id="languageSelector">
                        <option value="zh">中文</option>
                        <option value="en">English</option>
                        <option value="ja">日本語</option>
                        <option value="de">Deutsch</option>
                        <option value="hi">हिन्दी</option>
                        <option value="ru">Русский</option>
                        <option value="fr">Français</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Page 1: Main Game Page -->
        <div class="page active" id="gamePage">
            <!-- Core Game Area -->
            <div class="main-game-area">
                <!-- Sudoku Board -->
                <div class="sudoku-board-container">
                    <div class="board" id="sudokuBoard"></div>
                </div>

                <!-- Control Panel -->
                <div class="game-controls">
                    <button class="continue-game-btn" id="continueGameBtn" style="display: none;">
                        <span class="continue-icon">🔄</span>
                        <div class="continue-info">
                            <div class="continue-text">继续上次游戏</div>
                            <div class="continue-details" id="continueDetails">中等难度 - 45% 完成</div>
                        </div>
                    </button>
                    
                    <button class="new-game-btn" id="newGameBtn">新游戏</button>
                    
                    <div class="number-pad" id="numberPad"></div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="undoBtn">撤销</button>
                        <button class="action-btn" id="redoBtn">重做</button>
                        <button class="action-btn" id="pencilBtn">铅笔模式</button>
                        <button class="action-btn" id="hintBtn">提示 (3)</button>
                        <button class="action-btn" id="eraseBtn">橡皮擦</button>
                        <button class="action-btn" id="pauseBtn">暂停</button>
                    </div>
                </div>
            </div>

            <!-- Daily Challenge & Streak Section -->
            <div class="daily-section">
                <div class="daily-challenge-entry">
                    <button class="daily-challenge-btn" id="dailyChallengeBtn">
                        <div class="challenge-status">
                            <span class="challenge-text">今日挑战</span>
                            <span class="challenge-date" id="challengeDateDisplay">2025年6月25日</span>
                            <span class="challenge-status-text" id="challengeStatusDisplay">未完成</span>
                        </div>
                        <div class="challenge-icon">📅</div>
                    </button>
                </div>
                
                <div class="streak-display">
                    <div class="streak-text">你已连续打卡：<span id="streakDays">7</span>天 🌟</div>
                    <div class="streak-icon">🔥</div>
                </div>
            </div>

            <!-- Expandable Information Section -->
            <div class="info-section">
                <div class="info-header" id="infoToggle">
                    <h3>📚 立即玩免费的数独游戏</h3>
                    <span class="toggle-icon rotated">▼</span>
                </div>
                
                <div class="info-content expanded" id="infoContent">
                    <div class="info-benefits">
                        <h4>🧠 数独游戏的益处</h4>
                        <ul>
                            <li><strong>提升逻辑思维：</strong>通过推理和排除法训练大脑的逻辑思维能力</li>
                            <li><strong>增强记忆力：</strong>在解题过程中需要记住数字位置和可能性</li>
                            <li><strong>提高专注力：</strong>专注解题有助于训练集中注意力的能力</li>
                            <li><strong>减缓认知衰退：</strong>定期进行数独练习有助于保持大脑活跃</li>
                            <li><strong>缓解压力：</strong>沉浸在数字游戏中可以有效放松身心</li>
                        </ul>
                    </div>

                    <div class="info-rules">
                        <h4>🎯 数独游戏规则</h4>
                        <div class="rules-grid">
                            <div class="rule-item">
                                <div class="rule-icon">📏</div>
                                <div class="rule-text">
                                    <strong>行规则：</strong>每行必须包含1-9的数字，且不能重复
                                </div>
                            </div>
                            <div class="rule-item">
                                <div class="rule-icon">📐</div>
                                <div class="rule-text">
                                    <strong>列规则：</strong>每列必须包含1-9的数字，且不能重复
                                </div>
                            </div>
                            <div class="rule-item">
                                <div class="rule-icon">⬜</div>
                                <div class="rule-text">
                                    <strong>九宫格规则：</strong>每个3×3的九宫格必须包含1-9的数字，且不能重复
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="info-tips">
                        <h4>💡 数独游戏技巧</h4>
                        <div class="tips-container">
                            <div class="tip-category">
                                <h5>🔍 基础技巧</h5>
                                <ul>
                                    <li><strong>唯一数字法：</strong>在某行、列或九宫格中只有一个位置能填入某个数字</li>
                                    <li><strong>排除法：</strong>通过已知数字排除其他位置的可能性</li>
                                    <li><strong>候选数字：</strong>使用铅笔模式标记每个格子的可能数字</li>
                                </ul>
                            </div>
                            
                            <div class="tip-category">
                                <h5>🎓 进阶技巧</h5>
                                <ul>
                                    <li><strong>隐藏单一候选：</strong>某个数字在某区域只能在一个位置出现</li>
                                    <li><strong>裸子集：</strong>两个或多个格子只能填入相同的几个数字</li>
                                    <li><strong>指向对组：</strong>利用九宫格内的数字指向来排除其他区域</li>
                                </ul>
                            </div>
                            
                            <div class="tip-category">
                                <h5>🏆 解题策略</h5>
                                <ul>
                                    <li><strong>从简单开始：</strong>先填写确定的数字，再处理复杂区域</li>
                                    <li><strong>分区处理：</strong>重点关注数字较多的行、列或九宫格</li>
                                    <li><strong>保持耐心：</strong>遇到困难时可以暂停思考，换个角度分析</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="info-features">
                        <h4>🎮 游戏特色功能</h4>
                        <div class="features-grid">
                            <div class="feature-item">
                                <div class="feature-icon">💡</div>
                                <div class="feature-text">
                                    <strong>智能提示：</strong>当您遇到困难时，可以使用提示功能获得帮助
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">✏️</div>
                                <div class="feature-text">
                                    <strong>铅笔模式：</strong>标记候选数字，帮助您记录思考过程
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">↩️</div>
                                <div class="feature-text">
                                    <strong>撤销重做：</strong>随时撤销错误操作，无需担心犯错
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">📅</div>
                                <div class="feature-text">
                                    <strong>每日挑战：</strong>每天一个新谜题，保持练习习惯
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">🏆</div>
                                <div class="feature-text">
                                    <strong>成就系统：</strong>完成挑战获得星星奖励和成就徽章
                                </div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">🌍</div>
                                <div class="feature-text">
                                    <strong>多语言支持：</strong>支持7种语言，全球玩家都能享受
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 2: Daily Challenge Page -->
        <div class="page" id="challengePage">
            <div class="challenge-page">
                <div class="challenge-header">
                    <div class="challenge-date" id="challengeDate">2024年1月15日</div>
                    <div class="challenge-title">📅 每日挑战</div>
                    <div class="challenge-countdown" id="challengeCountdown">23:45:12</div>
                    <p>完成今日数独获得额外奖励！</p>
                    
                    <div class="challenge-progress">
                        <div class="challenge-progress-bar" id="challengeProgressBar" style="width: 0%"></div>
                    </div>
                    
                    <button class="challenge-start-btn" id="challengeStartBtn">开始挑战</button>
                </div>

                <div class="info-card">
                    <h3>🎁 今日奖励</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">⭐ +20</div>
                            <div class="stat-label">基础奖励</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">🔥 +14</div>
                            <div class="stat-label">连击奖励</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">⚡ +10</div>
                            <div class="stat-label">速度奖励</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">🏆</div>
                            <div class="stat-label">奖杯机会</div>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>📊 历史挑战</h3>
                    <p>本月完成：<strong>12/15</strong> 天</p>
                    <p>最佳时间：<strong>3分45秒</strong></p>
                    <p>平均时间：<strong>6分12秒</strong></p>
                    <p>连续完成：<strong>7</strong> 天</p>
                </div>
            </div>
        </div>

        <!-- Page 3: Trophy & Achievement Page -->
        <div class="page" id="trophyPage">
            <div class="trophy-page">
                <div class="trophy-header">
                    <h1>🏆 成就与奖杯</h1>
                </div>

                <div class="user-summary">
                    <div class="user-avatar">👤</div>
                    <div class="user-info">
                        <h2>数独大师</h2>
                        <p>总游戏时长：24小时30分钟</p>
                        <p>完成谜题：156个</p>
                        <p>连续打卡：7天</p>
                    </div>
                    <div class="star-count" id="totalStarsDisplay">⭐ 1,248</div>
                </div>

                <div class="trophy-grid">
                    <div class="trophy-item unlocked">
                        <div class="trophy-icon">🥉</div>
                        <div class="trophy-name">新手解谜者</div>
                        <div class="trophy-description">完成10个简单难度谜题</div>
                        <div class="trophy-progress">
                            <div class="trophy-progress-bar" style="width: 100%"></div>
                        </div>
                        <div class="trophy-reward">⭐ 50</div>
                    </div>

                    <div class="trophy-item unlocked">
                        <div class="trophy-icon">🌟</div>
                        <div class="trophy-name">每日坚持者</div>
                        <div class="trophy-description">连续打卡7天</div>
                        <div class="trophy-progress">
                            <div class="trophy-progress-bar" style="width: 100%"></div>
                        </div>
                        <div class="trophy-reward">⭐ 100</div>
                    </div>

                    <div class="trophy-item unlocked">
                        <div class="trophy-icon">🏆</div>
                        <div class="trophy-name">难度挑战者</div>
                        <div class="trophy-description">完成所有难度模式至少一次</div>
                        <div class="trophy-progress">
                            <div class="trophy-progress-bar" style="width: 75%"></div>
                        </div>
                        <div class="trophy-reward">⭐ 200</div>
                    </div>

                    <div class="trophy-item unlocked">
                        <div class="trophy-icon">🏅</div>
                        <div class="trophy-name">数独大师</div>
                        <div class="trophy-description">完成50个专家难度谜题</div>
                        <div class="trophy-progress">
                            <div class="trophy-progress-bar" style="width: 24%"></div>
                        </div>
                        <div class="trophy-reward">⭐ 500</div>
                    </div>

                    <div class="trophy-item unlocked">
                        <div class="trophy-icon">⚡</div>
                        <div class="trophy-name">速度之王</div>
                        <div class="trophy-description">在3分钟内完成中等难度</div>
                        <div class="trophy-progress">
                            <div class="trophy-progress-bar" style="width: 0%"></div>
                        </div>
                        <div class="trophy-reward">⭐ 150</div>
                    </div>

                    <div class="trophy-item unlocked">
                        <div class="trophy-icon">🔥</div>
                        <div class="trophy-name">连击高手</div>
                        <div class="trophy-description">连续打卡30天</div>
                        <div class="trophy-progress">
                            <div class="trophy-progress-bar" style="width: 23%"></div>
                        </div>
                        <div class="trophy-reward">⭐ 300</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 4: Shop Page -->
        <div class="page" id="shopPage">
            <div class="shop-page">
                <div class="shop-header">
                    <h1>🛒 商店与兑换</h1>
                    <div class="shop-balance">当前余额：<span id="shopBalance">⭐ 1,248</span></div>
                    <p>使用小星星兑换精美主题和实用道具</p>
                </div>

                <div class="shop-grid">
                    <div class="shop-item">
                        <div class="shop-item-icon">💡</div>
                        <div class="shop-item-name">提示次数包</div>
                        <div class="shop-item-description">获得额外5次提示机会，帮助您解决困难的谜题</div>
                        <div class="shop-item-price">⭐ 50</div>
                        <button class="shop-buy-btn" data-item="hints">立即兑换</button>
                    </div>

                    <div class="shop-item">
                        <div class="shop-item-icon">🎨</div>
                        <div class="shop-item-name">美拉德主题包A</div>
                        <div class="shop-item-description">温暖的焦糖配色主题，带来舒适的视觉体验</div>
                        <div class="shop-item-price">⭐ 200</div>
                        <button class="shop-buy-btn" data-item="theme-a">立即兑换</button>
                    </div>

                    <div class="shop-item">
                        <div class="shop-item-icon">🌅</div>
                        <div class="shop-item-name">美拉德主题包B</div>
                        <div class="shop-item-description">优雅的奶咖配色主题，营造宁静的游戏氛围</div>
                        <div class="shop-item-price">⭐ 200</div>
                        <button class="shop-buy-btn" data-item="theme-b">立即兑换</button>
                    </div>

                    <div class="shop-item">
                        <div class="shop-item-icon">🔢</div>
                        <div class="shop-item-name">数字样式X</div>
                        <div class="shop-item-description">精美的数字字体样式，让游戏界面更加个性化</div>
                        <div class="shop-item-price">⭐ 100</div>
                        <button class="shop-buy-btn" data-item="numbers-x">立即兑换</button>
                    </div>

                    <div class="shop-item">
                        <div class="shop-item-icon">⏰</div>
                        <div class="shop-item-name">时间冻结卡</div>
                        <div class="shop-item-description">在游戏中暂停计时器30秒，给您更多思考时间</div>
                        <div class="shop-item-price">⭐ 80</div>
                        <button class="shop-buy-btn" data-item="time-freeze">立即兑换</button>
                    </div>

                    <div class="shop-item">
                        <div class="shop-item-icon">🎯</div>
                        <div class="shop-item-name">错误检查器</div>
                        <div class="shop-item-description">自动检查并标出所有错误，让解题更加轻松</div>
                        <div class="shop-item-price">⭐ 120</div>
                        <button class="shop-buy-btn" data-item="error-checker">立即兑换</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 5: Settings Page -->
        <div class="page" id="settingsPage">
            <div class="settings-page">
                <div class="settings-section">
                    <h2>🔧 通用设置</h2>
                    
                    <div class="setting-item">
                        <div class="setting-label">音效</div>
                        <div class="setting-control">
                            <div class="toggle-switch active" id="soundToggle"></div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">错误高亮</div>
                        <div class="setting-control">
                            <div class="toggle-switch active" id="errorHighlightToggle"></div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">自动保存</div>
                        <div class="setting-control">
                            <div class="toggle-switch active" id="autoSaveToggle"></div>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h2>🎨 主题选择</h2>
                    <div class="theme-selector">
                        <div class="theme-option theme-a active" data-theme="a"></div>
                        <div class="theme-option theme-b" data-theme="b"></div>
                        <div class="theme-option theme-c" data-theme="c"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <h2>🌍 语言设置</h2>
                    <div class="setting-item">
                        <div class="setting-label">选择语言</div>
                        <div class="setting-control">
                            <select class="language-selector" id="settingsLanguageSelector">
                                <option value="zh">简体中文</option>
                                <option value="en">English</option>
                                <option value="ja">日本語</option>
                                <option value="de">Deutsch</option>
                                <option value="hi">हिन्दी</option>
                                <option value="ru">Русский</option>
                                <option value="fr">Français</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h2>⌨️ 键盘快捷键</h2>
                    <div class="keyboard-shortcuts">
                        <div class="shortcut-item">
                            <span>撤销</span>
                            <span class="shortcut-key">Ctrl+Z</span>
                        </div>
                        <div class="shortcut-item">
                            <span>重做</span>
                            <span class="shortcut-key">Ctrl+Y</span>
                        </div>
                        <div class="shortcut-item">
                            <span>铅笔模式</span>
                            <span class="shortcut-key">P</span>
                        </div>
                        <div class="shortcut-item">
                            <span>提示</span>
                            <span class="shortcut-key">H</span>
                        </div>
                        <div class="shortcut-item">
                            <span>橡皮擦</span>
                            <span class="shortcut-key">E</span>
                        </div>
                        <div class="shortcut-item">
                            <span>暂停</span>
                            <span class="shortcut-key">Space</span>
                        </div>
                        <div class="shortcut-item">
                            <span>数字1-9</span>
                            <span class="shortcut-key">1-9</span>
                        </div>
                        <div class="shortcut-item">
                            <span>删除</span>
                            <span class="shortcut-key">Del</span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h2>📚 帮助与支持</h2>
                    <div class="setting-item">
                        <div class="setting-label">游戏教程</div>
                        <div class="setting-control">
                            <button class="action-btn" id="tutorialBtn">查看教程</button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">反馈问题</div>
                        <div class="setting-control">
                            <button class="action-btn" id="feedbackBtn">意见反馈</button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">关于游戏</div>
                        <div class="setting-control">
                            <button class="action-btn" id="aboutBtn">关于</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="newGameModal">
        <div class="modal-content">
            <button class="close-btn" id="closeModal">&times;</button>
            <div class="modal-header">
                <h2>选择难度</h2>
                <p>选择适合您的挑战等级</p>
            </div>
            <div class="difficulty-grid">
                <button class="difficulty-btn" data-difficulty="easy">
                    🌱 简单<br>
                    <small>新手入门</small>
                </button>
                <button class="difficulty-btn" data-difficulty="medium">
                    🌿 中等<br>
                    <small>适度挑战</small>
                </button>
                <button class="difficulty-btn" data-difficulty="hard">
                    🌳 困难<br>
                    <small>高级玩家</small>
                </button>
                <button class="difficulty-btn" data-difficulty="expert">
                    🔥 专家<br>
                    <small>数独大师</small>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div id="notificationText">通知消息</div>
    </div>

    <script>
        // Enhanced translation system with more complete translations
        const translations = {
            zh: {
                // SEO Meta Tags
                pageTitle: "Sudoku Master - 数独大师 | 免费在线数独游戏",
                metaDescription: "Sudoku Master 免费游玩简单至行家级别的数独游戏。我们的数独网适用于所有浏览器及不同种类的移动式设备。根据困难度选择一个数独拼图并开始享受游戏的乐趣吧！",
                metaKeywords: "数独游戏,sudoku,在线数独,免费数独,数独大师,sudoku master,数独拼图,逻辑游戏,益智游戏,数字游戏,brain training,puzzle game,daily sudoku,数独挑战,数独解谜",
                ogDescription: "免费在线数独游戏，支持简单至专家级别的四种难度。适用于所有浏览器和移动设备，提供每日挑战、智能提示、多语言支持等丰富功能。",
                twitterDescription: "免费在线数独游戏，支持四种难度等级，适用于所有设备。提供每日挑战、智能提示等功能，享受数独解谜乐趣！",
                htmlLang: "zh-CN",
                ogLocale: "zh_CN",
                // Game UI
                newGame: "新游戏",
                hint: "提示",
                pencilMode: "铅笔模式",
                eraser: "橡皮擦",
                undo: "撤销",
                redo: "重做",
                pause: "暂停",
                stars: "小星星",
                streak: "连续天数",
                dailyChallenge: "每日挑战",
                dailyChallengeDesc: "完成今日数独获得额外奖励！",
                incomplete: "未完成",
                complete: "已完成",
                achievements: "最新成就",
                selectDifficulty: "选择难度",
                selectLevel: "选择适合您的挑战等级",
                easy: "简单",
                medium: "中等",
                hard: "困难",
                expert: "专家",
                easyDesc: "新手入门",
                mediumDesc: "适度挑战",
                hardDesc: "高级玩家",
                expertDesc: "数独大师",
                congratulations: "恭喜完成！",
                newRecord: "新纪录！",
                timeFormat: "用时: {time}",
                trophiesAchievements: "成就与奖杯",
                shopExchange: "商店与兑换",
                settings: "设置",
                gameGuide: "游戏指南",
                gameRules: "游戏规则",
                controls: "操作方法",
                tips: "解题技巧",
                generalSettings: "通用设置",
                sound: "音效",
                errorHighlight: "错误高亮",
                autoSave: "自动保存",
                themeSelection: "主题选择",
                languageSettings: "语言设置",
                keyboardShortcuts: "键盘快捷键",
                helpSupport: "帮助与支持",
                tutorial: "游戏教程",
                feedback: "反馈问题",
                about: "关于游戏",
                continueGame: "继续上次游戏",
                todayChallenge: "今日挑战",
                streakDays: "你已连续打卡：{days}天",
                challengeRewards: "今日奖励",
                basicReward: "基础奖励",
                streakReward: "连击奖励",
                speedReward: "速度奖励",
                trophyChance: "奖杯机会",
                freeGameTitle: "立即玩免费的数独游戏",
                gameBenefits: "数独游戏的益处",
                gameRulesTitle: "数独游戏规则",
                gameTips: "数独游戏技巧",
                gameFeatures: "游戏特色功能",
                improveLogic: "提升逻辑思维：通过推理和排除法训练大脑的逻辑思维能力",
                enhanceMemory: "增强记忆力：在解题过程中需要记住数字位置和可能性",
                improveFocus: "提高专注力：专注解题有助于训练集中注意力的能力",
                slowCognitive: "减缓认知衰退：定期进行数独练习有助于保持大脑活跃",
                reduceStress: "缓解压力：沉浸在数字游戏中可以有效放松身心",
                rowRule: "行规则：每行必须包含1-9的数字，且不能重复",
                colRule: "列规则：每列必须包含1-9的数字，且不能重复",
                boxRule: "九宫格规则：每个3×3的九宫格必须包含1-9的数字，且不能重复",
                basicTechniques: "基础技巧",
                advancedTechniques: "进阶技巧",
                solvingStrategy: "解题策略",
                onlyNumber: "唯一数字法：在某行、列或九宫格中只有一个位置能填入某个数字",
                elimination: "排除法：通过已知数字排除其他位置的可能性",
                candidateNumbers: "候选数字：使用铅笔模式标记每个格子的可能数字",
                hiddenSingle: "隐藏单一候选：某个数字在某区域只能在一个位置出现",
                nakedSubset: "裸子集：两个或多个格子只能填入相同的几个数字",
                pointingPairs: "指向对组：利用九宫格内的数字指向来排除其他区域",
                startSimple: "从简单开始：先填写确定的数字，再处理复杂区域",
                sectionProcess: "分区处理：重点关注数字较多的行、列或九宫格",
                stayPatient: "保持耐心：遇到困难时可以暂停思考，换个角度分析",
                smartHint: "智能提示：当您遇到困难时，可以使用提示功能获得帮助",
                pencilFunction: "铅笔模式：标记候选数字，帮助您记录思考过程",
                undoRedo: "撤销重做：随时撤销错误操作，无需担心犯错",
                dailyChallengeFeature: "每日挑战：每天一个新谜题，保持练习习惯",
                achievementSystem: "成就系统：完成挑战获得星星奖励和成就徽章",
                multiLanguage: "多语言支持：支持7种语言，全球玩家都能享受",
                shopBalance: "当前余额：",
                shopDescription: "使用小星星兑换精美主题和实用道具",
                hintsPack: "提示次数包",
                hintsPackDesc: "获得额外5次提示机会，帮助您解决困难的谜题",
                themePackA: "美拉德主题包A",
                themePackADesc: "温暖的焦糖配色主题，带来舒适的视觉体验",
                themePackB: "美拉德主题包B",
                themePackBDesc: "优雅的奶咖配色主题，营造宁静的游戏氛围",
                numberStyleX: "数字样式X",
                numberStyleXDesc: "精美的数字字体样式，让游戏界面更加个性化",
                timeFreezeCard: "时间冻结卡",
                timeFreezeCardDesc: "在游戏中暂停计时器30秒，给您更多思考时间",
                errorChecker: "错误检查器",
                errorCheckerDesc: "自动检查并标出所有错误，让解题更加轻松",
                buyNow: "立即兑换",
                // 信息区域详细内容
                logicTitle: "提升逻辑思维",
                logicDesc: "通过推理和排除法训练大脑的逻辑思维能力",
                memoryTitle: "增强记忆力", 
                memoryDesc: "在解题过程中需要记住数字位置和可能性",
                focusTitle: "提高专注力",
                focusDesc: "专注解题有助于训练集中注意力的能力",
                cognitiveTitle: "减缓认知衰退",
                cognitiveDesc: "定期进行数独练习有助于保持大脑活跃",
                stressTitle: "缓解压力",
                stressDesc: "沉浸在数字游戏中可以有效放松身心",
                rowRuleTitle: "行规则",
                rowRuleDesc: "每行必须包含1-9的数字，且不能重复",
                colRuleTitle: "列规则", 
                colRuleDesc: "每列必须包含1-9的数字，且不能重复",
                boxRuleTitle: "九宫格规则",
                boxRuleDesc: "每个3×3的九宫格必须包含1-9的数字，且不能重复",
                uniqueMethodTitle: "唯一数字法",
                uniqueMethodDesc: "在某行、列或九宫格中只有一个位置能填入某个数字",
                eliminationTitle: "排除法",
                eliminationDesc: "通过已知数字排除其他位置的可能性",
                candidateTitle: "候选数字",
                candidateDesc: "使用铅笔模式标记每个格子的可能数字",
                hiddenSingleTitle: "隐藏单一候选",
                hiddenSingleDesc: "某个数字在某区域只能在一个位置出现",
                nakedSubsetTitle: "裸子集",
                nakedSubsetDesc: "两个或多个格子只能填入相同的几个数字",
                pointingTitle: "指向对组",
                pointingDesc: "利用九宫格内的数字指向来排除其他区域",
                startSimpleTitle: "从简单开始",
                startSimpleDesc: "先填写确定的数字，再处理复杂区域",
                sectionTitle: "分区处理",
                sectionDesc: "重点关注数字较多的行、列或九宫格",
                patientTitle: "保持耐心",
                patientDesc: "遇到困难时可以暂停思考，换个角度分析",
                hintFeatureTitle: "智能提示",
                hintFeatureDesc: "当您遇到困难时，可以使用提示功能获得帮助",
                pencilFeatureTitle: "铅笔模式",
                pencilFeatureDesc: "标记候选数字，帮助您记录思考过程",
                undoFeatureTitle: "撤销重做",
                undoFeatureDesc: "随时撤销错误操作，无需担心犯错",
                dailyFeatureTitle: "每日挑战",
                dailyFeatureDesc: "每天一个新谜题，保持练习习惯",
                achievementFeatureTitle: "成就系统",
                achievementFeatureDesc: "完成挑战获得星星奖励和成就徽章",
                multiLanguageTitle: "多语言支持",
                multiLanguageDesc: "支持7种语言，全球玩家都能享受",
                shopBalance: "当前余额：",
                shopDescription: "使用小星星兑换精美主题和实用道具",
                hintsPack: "提示次数包",
                hintsPackDesc: "获得额外5次提示机会，帮助您解决困难的谜题",
                themePackA: "美拉德主题包A",
                themePackADesc: "温暖的焦糖配色主题，带来舒适的视觉体验",
                themePackB: "美拉德主题包B",
                themePackBDesc: "优雅的奶咖配色主题，营造宁静的游戏氛围",
                numberStyleX: "数字样式X",
                numberStyleXDesc: "精美的数字字体样式，让游戏界面更加个性化",
                timeFreezeCard: "时间冻结卡",
                timeFreezeCardDesc: "在游戏中暂停计时器30秒，给您更多思考时间",
                errorChecker: "错误检查器",
                errorCheckerDesc: "自动检查并标出所有错误，让解题更加轻松",
                buyNow: "立即兑换",
                // Daily Challenge Page
                completeTodayRewards: "完成今日数独获得额外奖励！",
                todayRewards: "今日奖励",
                historicalChallenges: "历史挑战",
                monthCompleted: "本月完成：",
                bestTime: "最佳时间：",
                averageTime: "平均时间：",
                consecutiveCompleted: "连续完成：",
                days: "天",
                startChallenge: "开始挑战",
                challengeCompleted: "已完成",
                challengeIncomplete: "未完成",
                // Trophy Page
                sudokuMaster: "数独大师",
                totalGameTime: "总游戏时长：",
                hoursMinutes: "小时{minutes}分钟",
                completedPuzzles: "完成谜题：",
                puzzles: "个",
                consecutiveCheckin: "连续打卡：",
                beginnerSolver: "新手解谜者",
                beginnerSolverDesc: "完成10个简单难度谜题",
                dailyPersistent: "每日坚持者", 
                dailyPersistentDesc: "连续打卡7天",
                difficultyChallenger: "难度挑战者",
                difficultyChallengerDesc: "完成所有难度模式至少一次",
                sudokuExpert: "数独大师",
                sudokuExpertDesc: "完成50个专家难度谜题",
                speedKing: "速度之王",
                speedKingDesc: "在3分钟内完成中等难度",
                comboMaster: "连击高手",
                comboMasterDesc: "连续打卡30天",
                // Shop Page
                currentBalance: "当前余额：",
                useStarsExchange: "使用小星星兑换精美主题和实用道具",
                hintsPack: "提示次数包",
                hintsPackDesc: "获得额外5次提示机会，帮助您解决困难的谜题",
                maillardThemeA: "美拉德主题包A",
                maillardThemeADesc: "温暖的焦糖配色主题，带来舒适的视觉体验",
                maillardThemeB: "美拉德主题包B",
                maillardThemeBDesc: "优雅的奶咖配色主题，营造宁静的游戏氛围",
                numberStyleX: "数字样式X",
                numberStyleXDesc: "精美的数字字体样式，让游戏界面更加个性化",
                timeFreezeCard: "时间冻结卡",
                timeFreezeCardDesc: "在游戏中暂停计时器30秒，给您更多思考时间",
                errorChecker: "错误检查器",
                errorCheckerDesc: "自动检查并标出所有错误，让解题更加轻松",
                exchangeNow: "立即兑换"
            },
            en: {
                // SEO Meta Tags
                pageTitle: "Sudoku Master - Free Online Sudoku Game",
                metaDescription: "Play Sudoku Master for free, from easy to expert level. Our Sudoku website works on all browsers and different types of mobile devices. Choose a Sudoku puzzle according to the difficulty and start having fun!",
                metaKeywords: "sudoku,online sudoku,free sudoku,sudoku master,sudoku puzzle,logic game,puzzle game,brain training,daily sudoku,sudoku solver,number puzzle",
                ogDescription: "Free online Sudoku game with four difficulty levels from easy to expert. Compatible with all browsers and devices, featuring daily challenges, smart hints, and multi-language support.",
                twitterDescription: "Free online Sudoku game with four difficulty levels. Features daily challenges, smart hints and more. Play now!",
                htmlLang: "en-US",
                ogLocale: "en_US",
                // Game UI
                newGame: "New Game",
                hint: "Hint",
                pencilMode: "Pencil Mode",
                eraser: "Eraser",
                undo: "Undo",
                redo: "Redo",
                pause: "Pause",
                stars: "Stars",
                streak: "Streak",
                dailyChallenge: "Daily Challenge",
                dailyChallengeDesc: "Complete today's sudoku for bonus rewards!",
                incomplete: "Incomplete",
                complete: "Complete",
                achievements: "Latest Achievements",
                selectDifficulty: "Select Difficulty",
                selectLevel: "Choose your challenge level",
                easy: "Easy",
                medium: "Medium",
                hard: "Hard",
                expert: "Expert",
                easyDesc: "Beginner friendly",
                mediumDesc: "Moderate challenge",
                hardDesc: "Advanced players",
                expertDesc: "Sudoku master",
                congratulations: "Congratulations!",
                newRecord: "New Record!",
                timeFormat: "Time: {time}",
                trophiesAchievements: "Trophies & Achievements",
                shopExchange: "Shop & Exchange",
                settings: "Settings",
                gameGuide: "Game Guide",
                gameRules: "Game Rules",
                controls: "Controls",
                tips: "Tips",
                generalSettings: "General Settings",
                sound: "Sound",
                errorHighlight: "Error Highlight",
                autoSave: "Auto Save",
                themeSelection: "Theme Selection",
                languageSettings: "Language Settings",
                keyboardShortcuts: "Keyboard Shortcuts",
                helpSupport: "Help & Support",
                tutorial: "Tutorial",
                feedback: "Feedback",
                about: "About",
                continueGame: "Continue Game",
                todayChallenge: "Today's Challenge",
                streakDays: "You have checked in for {days} consecutive days",
                challengeRewards: "Today's Rewards",
                basicReward: "Basic Reward",
                streakReward: "Streak Reward",
                speedReward: "Speed Reward",
                trophyChance: "Trophy Chance",
                freeGameTitle: "Play Free Sudoku Game Now",
                gameBenefits: "Benefits of Sudoku Games",
                gameRulesTitle: "Sudoku Game Rules",
                gameTips: "Sudoku Game Tips",
                gameFeatures: "Game Features",
                improveLogic: "Improve logical thinking: Train brain's logical thinking through reasoning and elimination",
                enhanceMemory: "Enhance memory: Need to remember number positions and possibilities during solving",
                improveFocus: "Improve focus: Focused solving helps train concentration ability",
                slowCognitive: "Slow cognitive decline: Regular sudoku practice helps keep brain active",
                reduceStress: "Reduce stress: Immersing in number games can effectively relax mind and body",
                rowRule: "Row rule: Each row must contain digits 1-9 without repetition",
                colRule: "Column rule: Each column must contain digits 1-9 without repetition",
                boxRule: "Box rule: Each 3×3 box must contain digits 1-9 without repetition",
                basicTechniques: "Basic Techniques",
                advancedTechniques: "Advanced Techniques",
                solvingStrategy: "Solving Strategy",
                onlyNumber: "Only number method: Only one position can fill a certain number in a row, column or box",
                elimination: "Elimination method: Exclude possibilities in other positions through known numbers",
                candidateNumbers: "Candidate numbers: Use pencil mode to mark possible numbers for each cell",
                hiddenSingle: "Hidden single candidate: A number can only appear in one position in a certain area",
                nakedSubset: "Naked subset: Two or more cells can only fill the same few numbers",
                pointingPairs: "Pointing pairs: Use number directions within boxes to exclude other areas",
                startSimple: "Start simple: Fill confirmed numbers first, then handle complex areas",
                sectionProcess: "Section processing: Focus on rows, columns or boxes with more numbers",
                stayPatient: "Stay patient: When encountering difficulties, pause to think and analyze from different angles",
                smartHint: "Smart hint: When you encounter difficulties, you can use the hint function for help",
                pencilFunction: "Pencil mode: Mark candidate numbers to help you record thinking process",
                undoRedo: "Undo/Redo: Undo wrong operations anytime without worrying about mistakes",
                dailyChallengeFeature: "Daily challenge: A new puzzle every day to maintain practice habits",
                achievementSystem: "Achievement system: Complete challenges to get star rewards and achievement badges",
                multiLanguage: "Multi-language support: Support 7 languages for global players to enjoy",
                shopBalance: "Current Balance:",
                shopDescription: "Use stars to exchange beautiful themes and useful tools",
                hintsPack: "Hints Pack",
                hintsPackDesc: "Get 5 extra hint opportunities to help you solve difficult puzzles",
                themePackA: "Maillard Theme Pack A",
                themePackADesc: "Warm caramel color theme, bringing comfortable visual experience",
                themePackB: "Maillard Theme Pack B",
                themePackBDesc: "Elegant milk coffee color theme, creating peaceful game atmosphere",
                numberStyleX: "Number Style X",
                numberStyleXDesc: "Beautiful number font style, making game interface more personalized",
                timeFreezeCard: "Time Freeze Card",
                timeFreezeCardDesc: "Pause timer for 30 seconds in game, giving you more thinking time",
                errorChecker: "Error Checker",
                errorCheckerDesc: "Automatically check and mark all errors, making solving easier",
                buyNow: "Exchange Now",
                // Info section detailed content
                logicTitle: "Improve Logical Thinking",
                logicDesc: "Train brain's logical thinking through reasoning and elimination",
                memoryTitle: "Enhance Memory", 
                memoryDesc: "Need to remember number positions and possibilities during solving",
                focusTitle: "Improve Focus",
                focusDesc: "Focused solving helps train concentration ability",
                cognitiveTitle: "Slow Cognitive Decline",
                cognitiveDesc: "Regular sudoku practice helps keep brain active",
                stressTitle: "Reduce Stress",
                stressDesc: "Immersing in number games can effectively relax mind and body",
                rowRuleTitle: "Row Rule",
                rowRuleDesc: "Each row must contain digits 1-9 without repetition",
                colRuleTitle: "Column Rule", 
                colRuleDesc: "Each column must contain digits 1-9 without repetition",
                boxRuleTitle: "Box Rule",
                boxRuleDesc: "Each 3×3 box must contain digits 1-9 without repetition",
                uniqueMethodTitle: "Only Number Method",
                uniqueMethodDesc: "Only one position can fill a certain number in a row, column or box",
                eliminationTitle: "Elimination Method",
                eliminationDesc: "Exclude possibilities in other positions through known numbers",
                candidateTitle: "Candidate Numbers",
                candidateDesc: "Use pencil mode to mark possible numbers for each cell",
                hiddenSingleTitle: "Hidden Single Candidate",
                hiddenSingleDesc: "A number can only appear in one position in a certain area",
                nakedSubsetTitle: "Naked Subset",
                nakedSubsetDesc: "Two or more cells can only fill the same few numbers",
                pointingTitle: "Pointing Pairs",
                pointingDesc: "Use number directions within boxes to exclude other areas",
                startSimpleTitle: "Start Simple",
                startSimpleDesc: "Fill confirmed numbers first, then handle complex areas",
                sectionTitle: "Section Processing",
                sectionDesc: "Focus on rows, columns or boxes with more numbers",
                patientTitle: "Stay Patient",
                patientDesc: "When encountering difficulties, pause to think and analyze from different angles",
                hintFeatureTitle: "Smart Hint",
                hintFeatureDesc: "When you encounter difficulties, you can use the hint function for help",
                pencilFeatureTitle: "Pencil Mode",
                pencilFeatureDesc: "Mark candidate numbers to help you record thinking process",
                undoFeatureTitle: "Undo/Redo",
                undoFeatureDesc: "Undo wrong operations anytime without worrying about mistakes",
                dailyFeatureTitle: "Daily Challenge",
                dailyFeatureDesc: "A new puzzle every day to maintain practice habits",
                achievementFeatureTitle: "Achievement System",
                achievementFeatureDesc: "Complete challenges to get star rewards and achievement badges",
                multiLanguageTitle: "Multi-language Support",
                multiLanguageDesc: "Support 7 languages for global players to enjoy",
                shopBalance: "Solde actuel:",
                shopDescription: "Utilisez les étoiles pour échanger contre de beaux thèmes et des outils utiles",
                hintsPack: "Paquet d'indices",
                hintsPackDesc: "Obtenez 5 opportunités d'indices supplémentaires pour vous aider à résoudre des puzzles difficiles",
                themePackA: "Paquet de thème Maillard A",
                themePackADesc: "Thème de couleur caramel chaleureux pour une expérience visuelle confortable",
                themePackB: "Paquet de thème Maillard B",
                themePackBDesc: "Thème de couleur café au lait élégant pour créer une atmosphère de jeu paisible",
                numberStyleX: "Style de nombres X",
                numberStyleXDesc: "Style de police de nombres magnifique pour une interface de jeu plus personnalisée",
                timeFreezeCard: "Carte de gel du temps",
                timeFreezeCardDesc: "Mettez en pause le minuteur pendant 30 secondes dans le jeu pour plus de temps de réflexion",
                errorChecker: "Vérificateur d'erreurs",
                errorCheckerDesc: "Vérifiez et marquez automatiquement toutes les erreurs pour une résolution plus facile",
                buyNow: "Échanger maintenant"
            },
            ja: {
                // SEO Meta Tags
                pageTitle: "Sudoku Master - 数独大師 | 無料オンライン数独ゲーム",
                metaDescription: "数独マスターを無料でプレイしましょう。初級レベルから上級レベルまで、様々なレベルに対応しています。当サイトの数独ウェブサイトは、あらゆるブラウザと様々なモバイルデバイスでご利用いただけます。難易度に合わせて数独パズルを選んで、さあ、始めましょう！",
                metaKeywords: "数独,sudoku,オンライン数独,無料数独,数独マスター,sudoku master,数独パズル,論理ゲーム,パズルゲーム,脳トレ,デイリー数独,数独ソルバー",
                ogDescription: "無料オンライン数独ゲーム。簡単からエキスパートまでの4つの難易度レベル。すべてのブラウザとデバイスに対応、毎日チャレンジ、スマートヒント、多言語サポート付き。",
                twitterDescription: "4つの難易度レベルを持つ無料オンライン数独ゲーム。毎日チャレンジ、スマートヒントなどの機能付き。今すぐプレイ！",
                htmlLang: "ja-JP",
                ogLocale: "ja_JP",
                // Game UI
                newGame: "新しいゲーム",
                hint: "ヒント",
                pencilMode: "ペンシルモード",
                eraser: "消しゴム",
                undo: "元に戻す",
                redo: "やり直し",
                pause: "一時停止",
                stars: "スター",
                streak: "連続",
                dailyChallenge: "デイリーチャレンジ",
                dailyChallengeDesc: "今日の数独を完成させてボーナス報酬をゲット！",
                incomplete: "未完成",
                complete: "完了",
                achievements: "最新の実績",
                selectDifficulty: "難易度選択",
                selectLevel: "チャレンジレベルを選択",
                easy: "簡単",
                medium: "普通",
                hard: "難しい",
                expert: "エキスパート",
                easyDesc: "初心者向け",
                mediumDesc: "適度な挑戦",
                hardDesc: "上級者向け",
                expertDesc: "数独マスター",
                congratulations: "おめでとうございます！",
                newRecord: "新記録！",
                timeFormat: "時間: {time}",
                trophiesAchievements: "トロフィーと実績",
                shopExchange: "ショップと交換",
                settings: "設定",
                gameGuide: "ゲームガイド",
                gameRules: "ゲームルール",
                controls: "操作方法",
                tips: "ヒント",
                generalSettings: "一般設定",
                sound: "音声",
                errorHighlight: "エラーハイライト",
                autoSave: "自動保存",
                themeSelection: "テーマ選択",
                languageSettings: "言語設定",
                keyboardShortcuts: "キーボードショートカット",
                helpSupport: "ヘルプとサポート",
                tutorial: "チュートリアル",
                feedback: "フィードバック",
                about: "について",
                continueGame: "ゲームを続ける",
                todayChallenge: "今日のチャレンジ",
                streakDays: "{days}日連続でチェックインしました",
                challengeRewards: "今日の報酬",
                basicReward: "基本報酬",
                streakReward: "連続報酬",
                speedReward: "スピード報酬",
                trophyChance: "トロフィーチャンス",
                freeGameTitle: "今すぐ無料数独をプレイ",
                gameBenefits: "数独ゲームの利点",
                gameRulesTitle: "数独ゲームのルール",
                gameTips: "数独ゲームのコツ",
                gameFeatures: "ゲーム機能",
                // Info section detailed content
                logicTitle: "論理的思考の向上",
                logicDesc: "推論と排除によって脳の論理的思考能力を鍛える",
                memoryTitle: "記憶力の向上", 
                memoryDesc: "解決過程で数字の位置と可能性を覚える必要がある",
                focusTitle: "集中力の向上",
                focusDesc: "集中した問題解決によって集中力を鍛える",
                cognitiveTitle: "認知機能低下の抑制",
                cognitiveDesc: "定期的な数独練習は脳を活性化させる",
                stressTitle: "ストレス軽減",
                stressDesc: "数字ゲームに没頭することで心身をリラックスさせる",
                rowRuleTitle: "行のルール",
                rowRuleDesc: "各行は1-9の数字を重複なく含む必要がある",
                colRuleTitle: "列のルール", 
                colRuleDesc: "各列は1-9の数字を重複なく含む必要がある",
                boxRuleTitle: "ボックスのルール",
                boxRuleDesc: "各3×3ボックスは1-9の数字を重複なく含む必要がある",
                basicTechniques: "基本テクニック",
                advancedTechniques: "上級テクニック",
                solvingStrategy: "解決戦略",
                uniqueMethodTitle: "唯一数字法",
                uniqueMethodDesc: "行、列、ボックス内で特定の数字に対して1つの位置のみ存在する",
                eliminationTitle: "除外法",
                eliminationDesc: "既知の数字を使って他の位置の可能性を除外する",
                candidateTitle: "候補数字",
                candidateDesc: "ペンシルモードを使って各セルの可能な数字をマークする",
                hiddenSingleTitle: "隠れた単一候補",
                hiddenSingleDesc: "特定の領域で数字が1つの位置にのみ現れることができる",
                nakedSubsetTitle: "裸の部分集合",
                nakedSubsetDesc: "2つ以上のセルが同じ少数の数字のみを含むことができる",
                pointingTitle: "指向ペア",
                pointingDesc: "ボックス内の数字の方向を使って他の領域を除外する",
                startSimpleTitle: "簡単なものから始める",
                startSimpleDesc: "確定した数字を最初に埋め、複雑な領域は後で処理する",
                sectionTitle: "セクション処理",
                sectionDesc: "多くの数字がある行、列、ボックスに焦点を当てる",
                patientTitle: "忍耐を保つ",
                patientDesc: "困難に直面したときは一時停止し、異なる角度から分析する",
                hintFeatureTitle: "スマートヒント",
                hintFeatureDesc: "困難に直面したときはヒント機能を使ってサポートを得る",
                pencilFeatureTitle: "ペンシルモード",
                pencilFeatureDesc: "候補数字をマークし、思考プロセスを記録する",
                undoFeatureTitle: "元に戻す/やり直し",
                undoFeatureDesc: "いつでも間違った操作を元に戻せるので心配不要",
                dailyFeatureTitle: "デイリーチャレンジ",
                dailyFeatureDesc: "練習習慣を維持するために毎日新しいパズルを取得",
                achievementFeatureTitle: "実績システム",
                achievementFeatureDesc: "チャレンジをクリアしてスター報酬と実績バッジを獲得",
                multiLanguageTitle: "多言語サポート",
                multiLanguageDesc: "7言語をサポートし、世界中のプレイヤーが楽しめる",
                shopBalance: "現在の残高:",
                shopDescription: "スターを使って美しいテーマと便利なツールを交換",
                hintsPack: "ヒントパック",
                hintsPackDesc: "困難なパズルを解くのに役立つ5つの追加ヒント機会を取得",
                themePackA: "マイヤードテーマパックA",
                themePackADesc: "快適な視覚体験をもたらす温かいキャラメル配色テーマ",
                themePackB: "マイヤードテーマパックB",
                themePackBDesc: "エレガントなミルクコーヒー配色テーマで平和なゲーム雰囲気を作る",
                numberStyleX: "数字スタイルX",
                numberStyleXDesc: "ゲームインターフェースをより個性的にする美しい数字フォントスタイル",
                timeFreezeCard: "時間凍結カード",
                timeFreezeCardDesc: "ゲーム中にタイマーを30秒間一時停止してより多くの思考時間を得る",
                errorChecker: "エラーチェッカー",
                errorCheckerDesc: "すべてのエラーを自動的にチェックしてマークし、より簡単に解決",
                buyNow: "今すぐ交換"
            },
            de: {
                newGame: "Neues Spiel",
                hint: "Hinweis",
                pencilMode: "Bleistift-Modus",
                eraser: "Radiergummi",
                undo: "Rückgängig",
                redo: "Wiederholen",
                pause: "Pause",
                stars: "Sterne",
                streak: "Serie",
                dailyChallenge: "Tägliche Herausforderung",
                dailyChallengeDesc: "Löse das heutige Sudoku für Bonusbelohnungen!",
                incomplete: "Unvollständig",
                complete: "Vollständig",
                achievements: "Neueste Erfolge",
                selectDifficulty: "Schwierigkeit wählen",
                selectLevel: "Wähle dein Herausforderungslevel",
                easy: "Einfach",
                medium: "Mittel",
                hard: "Schwer",
                expert: "Experte",
                easyDesc: "Anfängerfreundlich",
                mediumDesc: "Mittlere Herausforderung",
                hardDesc: "Fortgeschrittene Spieler",
                expertDesc: "Sudoku-Meister",
                congratulations: "Glückwunsch!",
                newRecord: "Neuer Rekord!",
                timeFormat: "Zeit: {time}",
                trophiesAchievements: "Trophäen & Erfolge",
                shopExchange: "Shop & Tausch",
                settings: "Einstellungen",
                generalSettings: "Allgemeine Einstellungen",
                sound: "Ton",
                errorHighlight: "Fehler hervorheben",
                autoSave: "Automatisch speichern",
                themeSelection: "Theme-Auswahl",
                languageSettings: "Spracheinstellungen",
                keyboardShortcuts: "Tastenkürzel",
                helpSupport: "Hilfe & Support",
                tutorial: "Tutorial",
                feedback: "Feedback",
                about: "Über das Spiel",
                continueGame: "Spiel fortsetzen",
                todayChallenge: "Heutige Herausforderung",
                streakDays: "Du hast {days} Tage in Folge eingecheckt",
                challengeRewards: "Heutige Belohnungen",
                basicReward: "Grundbelohnung",
                streakReward: "Serienbelohnung",
                speedReward: "Geschwindigkeitsbelohnung",
                trophyChance: "Trophäenchance",
                freeGameTitle: "Jetzt kostenloses Sudoku spielen",
                gameBenefits: "Vorteile von Sudoku-Spielen",
                gameRulesTitle: "Sudoku-Spielregeln",
                gameTips: "Sudoku-Spieltipps",
                gameFeatures: "Spielfunktionen",
                // Info section detailed content
                logicTitle: "Logisches Denken verbessern",
                logicDesc: "Trainiere die logischen Denkfähigkeiten des Gehirns durch Schlussfolgerungen und Ausschlussverfahren",
                memoryTitle: "Gedächtnis verbessern", 
                memoryDesc: "Während des Lösens müssen Zahlenpositionen und Möglichkeiten gemerkt werden",
                focusTitle: "Konzentration verbessern",
                focusDesc: "Fokussiertes Problemlösen hilft beim Training der Konzentrationsfähigkeit",
                cognitiveTitle: "Kognitive Verschlechterung verlangsamen",
                cognitiveDesc: "Regelmäßige Sudoku-Praxis hält das Gehirn aktiv",
                stressTitle: "Stress reduzieren",
                stressDesc: "Das Eintauchen in Zahlenspiele kann Körper und Geist entspannen",
                rowRuleTitle: "Zeilenregel",
                rowRuleDesc: "Jede Zeile muss die Zahlen 1-9 ohne Wiederholung enthalten",
                colRuleTitle: "Spaltenregel", 
                colRuleDesc: "Jede Spalte muss die Zahlen 1-9 ohne Wiederholung enthalten",
                boxRuleTitle: "Kastenregel",
                boxRuleDesc: "Jeder 3×3-Kasten muss die Zahlen 1-9 ohne Wiederholung enthalten",
                basicTechniques: "Grundtechniken",
                advancedTechniques: "Fortgeschrittene Techniken",
                solvingStrategy: "Lösungsstrategie",
                uniqueMethodTitle: "Eindeutige Zahlenmethode",
                uniqueMethodDesc: "In einer Zeile, Spalte oder einem Kasten gibt es nur eine Position für eine bestimmte Zahl",
                eliminationTitle: "Eliminierungsmethode",
                eliminationDesc: "Verwende bekannte Zahlen, um Möglichkeiten an anderen Positionen auszuschließen",
                candidateTitle: "Kandidatenzahlen",
                candidateDesc: "Verwende den Bleistift-Modus, um mögliche Zahlen für jede Zelle zu markieren",
                hiddenSingleTitle: "Versteckte Einzelkandidaten",
                hiddenSingleDesc: "In einem bestimmten Bereich kann eine Zahl nur an einer Position erscheinen",
                nakedSubsetTitle: "Nackte Teilmenge",
                nakedSubsetDesc: "Zwei oder mehr Zellen können nur dieselben wenigen Zahlen enthalten",
                pointingTitle: "Zeigernde Paare",
                pointingDesc: "Verwende Zahlenrichtungen innerhalb von Kästen, um andere Bereiche auszuschließen",
                startSimpleTitle: "Einfach beginnen",
                startSimpleDesc: "Fülle zuerst bestätigte Zahlen, behandle komplexe Bereiche später",
                sectionTitle: "Abschnittsverarbeitung",
                sectionDesc: "Konzentriere dich auf Zeilen, Spalten oder Kästen mit vielen Zahlen",
                patientTitle: "Geduldig bleiben",
                patientDesc: "Bei Schwierigkeiten pausieren und aus verschiedenen Blickwinkeln analysieren",
                hintFeatureTitle: "Intelligenter Hinweis",
                hintFeatureDesc: "Bei Schwierigkeiten kannst du die Hinweisfunktion für Hilfe nutzen",
                pencilFeatureTitle: "Bleistift-Modus",
                pencilFeatureDesc: "Markiere Kandidatenzahlen und hilf beim Aufzeichnen des Denkprozesses",
                undoFeatureTitle: "Rückgängig/Wiederholen",
                undoFeatureDesc: "Mache falsche Operationen jederzeit rückgängig, ohne dir Sorgen machen zu müssen",
                dailyFeatureTitle: "Tägliche Herausforderung",
                dailyFeatureDesc: "Erhalte jeden Tag neue Rätsel, um Übungsgewohnheiten aufrechtzuerhalten",
                achievementFeatureTitle: "Erfolgssystem",
                achievementFeatureDesc: "Erhalte Sterne-Belohnungen und Erfolgsabzeichen durch das Meistern von Herausforderungen",
                multiLanguageTitle: "Mehrsprachige Unterstützung",
                multiLanguageDesc: "Unterstützt 7 Sprachen, damit Spieler weltweit Spaß haben können",
                shopBalance: "Aktueller Kontostand:",
                shopDescription: "Verwende Sterne, um schöne Themes und nützliche Werkzeuge zu tauschen",
                hintsPack: "Hinweis-Paket",
                hintsPackDesc: "Erhalte 5 zusätzliche Hinweismöglichkeiten, um dir bei schwierigen Rätseln zu helfen",
                themePackA: "Maillard-Theme-Paket A",
                themePackADesc: "Warmes Karamell-Farbthema für eine angenehme visuelle Erfahrung",
                themePackB: "Maillard-Theme-Paket B",
                themePackBDesc: "Elegantes Milchkaffee-Farbthema für eine friedliche Spielatmosphäre",
                numberStyleX: "Zahlenstil X",
                numberStyleXDesc: "Schöner Zahlenschriftstil für eine personalisiertere Spieloberfläche",
                timeFreezeCard: "Zeit-Einfrieren-Karte",
                timeFreezeCardDesc: "Pausiere den Timer für 30 Sekunden im Spiel für mehr Denkzeit",
                errorChecker: "Fehlerprüfer",
                errorCheckerDesc: "Überprüfe und markiere automatisch alle Fehler für einfacheres Lösen",
                buyNow: "Jetzt tauschen"
            },
            hi: {
                // SEO Meta Tags
                pageTitle: "Sudoku Master - मुफ्त ऑनलाइन सुडोकू गेम",
                metaDescription: "सुडोकू मास्टर को निःशुल्क खेलें, आसान से लेकर विशेषज्ञ स्तर तक। हमारी सुडोकू वेबसाइट सभी ब्राउज़रों और विभिन्न प्रकार के मोबाइल उपकरणों पर काम करती है। कठिनाई के अनुसार एक सुडोकू पहेली चुनें और मज़े करना शुरू करें!",
                metaKeywords: "सुडोकू,ऑनलाइन सुडोकू,मुफ्त सुडोकू,सुडोकू मास्टर,सुडोकू पहेली,तर्क खेल,पहेली खेल,दिमागी कसरत,दैनिक सुडोकू,सुडोकू सॉल्वर,संख्या पहेली",
                ogDescription: "मुफ्त ऑनलाइन सुडोकू गेम आसान से एक्सपर्ट तक चार कठिनाई स्तरों के साथ। सभी ब्राउज़र और डिवाइस के साथ संगत, दैनिक चुनौतियों, स्मार्ट हिंट्स और बहुभाषी सपोर्ट के साथ।",
                twitterDescription: "चार कठिनाई स्तरों के साथ मुफ्त ऑनलाइन सुडोकू गेम। दैनिक चुनौतियां, स्मार्ट हिंट्स और बहुत कुछ। अब खेलें!",
                htmlLang: "hi-IN",
                ogLocale: "hi_IN",
                // Game UI
                newGame: "नया खेल",
                hint: "संकेत",
                pencilMode: "पेंसिल मोड",
                eraser: "इरेज़र",
                undo: "पूर्ववत करें",
                redo: "दोबारा करें",
                pause: "रोकें",
                stars: "सितारे",
                streak: "लगातार",
                dailyChallenge: "दैनिक चुनौती",
                dailyChallengeDesc: "बोनस पुरस्कारों के लिए आज का सुडोकू पूरा करें!",
                incomplete: "अधूरा",
                complete: "पूरा",
                achievements: "नवीनतम उपलब्धियां",
                selectDifficulty: "कठिनाई चुनें",
                selectLevel: "अपना चुनौती स्तर चुनें",
                easy: "आसान",
                medium: "मध्यम",
                hard: "कठिन",
                expert: "विशेषज्ञ",
                easyDesc: "शुरुआती लोगों के लिए",
                mediumDesc: "मध्यम चुनौती",
                hardDesc: "उन्नत खिलाड़ी",
                expertDesc: "सुडोकू मास्टर",
                congratulations: "बधाई हो!",
                newRecord: "नया रिकॉर्ड!",
                timeFormat: "समय: {time}",
                trophiesAchievements: "ट्रॉफी और उपलब्धियां",
                shopExchange: "दुकान और एक्सचेंज",
                settings: "सेटिंग्स",
                generalSettings: "सामान्य सेटिंग्स",
                sound: "ध्वनि",
                errorHighlight: "त्रुटि हाइलाइट",
                autoSave: "स्वचालित सेव",
                themeSelection: "थीम चयन",
                languageSettings: "भाषा सेटिंग्स",
                keyboardShortcuts: "कीबोर्ड शॉर्टकट",
                helpSupport: "सहायता और समर्थन",
                tutorial: "ट्यूटोरियल",
                feedback: "फीडबैक",
                about: "खेल के बारे में",
                continueGame: "खेल जारी रखें",
                todayChallenge: "आज की चुनौती",
                streakDays: "आप {days} दिन लगातार चेक-इन कर चुके हैं",
                challengeRewards: "आज के पुरस्कार",
                basicReward: "मूल पुरस्कार",
                streakReward: "लगातार पुरस्कार",
                speedReward: "गति पुरस्कार",
                trophyChance: "ट्रॉफी मौका",
                // Info section detailed content
                logicTitle: "तर्कसंगत सोच में सुधार",
                logicDesc: "तर्क और बहिष्करण के माध्यम से मस्तिष्क की तार्किक सोच क्षमता को प्रशिक्षित करें",
                memoryTitle: "स्मृति में सुधार", 
                memoryDesc: "समाधान प्रक्रिया में संख्याओं की स्थितियों और संभावनाओं को याद रखना आवश्यक है",
                focusTitle: "एकाग्रता में सुधार",
                focusDesc: "केंद्रित समस्या समाधान के माध्यम से एकाग्रता क्षमता को प्रशिक्षित करें",
                cognitiveTitle: "संज्ञानात्मक गिरावट को रोकना",
                cognitiveDesc: "नियमित सुडोकू अभ्यास मस्तिष्क को सक्रिय रखता है",
                stressTitle: "तनाव कम करना",
                stressDesc: "संख्या खेल में तल्लीन होकर शरीर और मन को आराम दें",
                rowRuleTitle: "पंक्ति नियम",
                rowRuleDesc: "प्रत्येक पंक्ति में 1-9 तक की संख्याएं बिना दोहराए होनी चाहिए",
                colRuleTitle: "स्तंभ नियम", 
                colRuleDesc: "प्रत्येक स्तंभ में 1-9 तक की संख्याएं बिना दोहराए होनी चाहिए",
                boxRuleTitle: "बॉक्स नियम",
                boxRuleDesc: "प्रत्येक 3×3 बॉक्स में 1-9 तक की संख्याएं बिना दोहराए होनी चाहिए",
                uniqueMethodTitle: "अद्वितीय संख्या विधि",
                uniqueMethodDesc: "पंक्ति, स्तंभ या बॉक्स में किसी विशिष्ट संख्या के लिए केवल एक स्थान हो",
                eliminationTitle: "बहिष्करण विधि",
                eliminationDesc: "ज्ञात संख्याओं का उपयोग करके अन्य स्थानों की संभावनाओं को बाहर करें",
                candidateTitle: "उम्मीदवार संख्याएं",
                candidateDesc: "पेंसिल मोड का उपयोग करके प्रत्येक सेल के लिए संभावित संख्याओं को चिह्नित करें",
                hiddenSingleTitle: "छिपे हुए एकल उम्मीदवार",
                hiddenSingleDesc: "किसी विशिष्ट क्षेत्र में संख्या केवल एक स्थान पर दिखाई दे सकती है",
                nakedSubsetTitle: "नग्न उपसमुच्चय",
                nakedSubsetDesc: "दो या अधिक सेल में केवल समान कुछ संख्याएं हो सकती हैं",
                pointingTitle: "इशारा करने वाले जोड़े",
                pointingDesc: "बॉक्स में संख्याओं की दिशा का उपयोग करके अन्य क्षेत्रों को बाहर करें",
                startSimpleTitle: "सरल से शुरू करें",
                startSimpleDesc: "पहले निश्चित संख्याएं भरें, जटिल क्षेत्रों को बाद में संभालें",
                sectionTitle: "अनुभाग प्रसंस्करण",
                sectionDesc: "अधिक संख्याओं वाली पंक्तियों, स्तंभों और बॉक्स पर ध्यान दें",
                patientTitle: "धैर्य रखें",
                patientDesc: "कठिनाइयों का सामना करते समय रुकें और विभिन्न कोणों से विश्लेषण करें",
                hintFeatureTitle: "स्मार्ट संकेत",
                hintFeatureDesc: "कठिनाइयों का सामना करते समय संकेत सुविधा से सहायता प्राप्त करें",
                pencilFeatureTitle: "पेंसिल मोड",
                pencilFeatureDesc: "उम्मीदवार संख्याओं को चिह्नित करें और सोच प्रक्रिया को रिकॉर्ड करें",
                undoFeatureTitle: "पूर्ववत/दोबारा करें",
                undoFeatureDesc: "किसी भी समय गलत संचालन को पूर्ववत करें, चिंता न करें",
                dailyFeatureTitle: "दैनिक चुनौती",
                dailyFeatureDesc: "अभ्यास की आदत बनाए रखने के लिए रोज नई पहेलियां प्राप्त करें",
                achievementFeatureTitle: "उपलब्धि प्रणाली",
                achievementFeatureDesc: "चुनौतियों को पूरा करके स्टार पुरस्कार और उपलब्धि बैज प्राप्त करें",
                multiLanguageTitle: "बहुभाषी समर्थन",
                multiLanguageDesc: "7 भाषाओं का समर्थन करता है, दुनिया भर के खिलाड़ी आनंद ले सकते हैं"
            },
            ru: {
                newGame: "Новая игра",
                hint: "Подсказка",
                pencilMode: "Режим карандаша",
                eraser: "Ластик",
                undo: "Отменить",
                redo: "Повторить",
                pause: "Пауза",
                stars: "Звезды",
                streak: "Серия",
                dailyChallenge: "Ежедневный вызов",
                dailyChallengeDesc: "Решите сегодняшнее судоку для бонусных наград!",
                incomplete: "Не завершено",
                complete: "Завершено",
                achievements: "Последние достижения",
                selectDifficulty: "Выберите сложность",
                selectLevel: "Выберите уровень вызова",
                easy: "Легко",
                medium: "Средне",
                hard: "Сложно",
                expert: "Эксперт",
                easyDesc: "Для начинающих",
                mediumDesc: "Умеренный вызов",
                hardDesc: "Продвинутые игроки",
                expertDesc: "Мастер судоку",
                congratulations: "Поздравляем!",
                newRecord: "Новый рекорд!",
                timeFormat: "Время: {time}",
                trophiesAchievements: "Трофеи и достижения",
                shopExchange: "Магазин и обмен",
                settings: "Настройки",
                generalSettings: "Общие настройки",
                sound: "Звук",
                errorHighlight: "Подсветка ошибок",
                autoSave: "Автосохранение",
                themeSelection: "Выбор темы",
                languageSettings: "Языковые настройки",
                keyboardShortcuts: "Горячие клавиши",
                helpSupport: "Помощь и поддержка",
                tutorial: "Обучение",
                feedback: "Обратная связь",
                about: "О игре",
                continueGame: "Продолжить игру",
                todayChallenge: "Сегодняшний вызов",
                streakDays: "Вы отметились {days} дней подряд",
                challengeRewards: "Сегодняшние награды",
                basicReward: "Базовая награда",
                streakReward: "Награда за серию",
                speedReward: "Награда за скорость",
                trophyChance: "Шанс трофея",
                freeGameTitle: "Играйте в бесплатное судоку прямо сейчас",
                gameBenefits: "Преимущества игр судоку",
                gameRulesTitle: "Правила игры судоку",
                gameTips: "Советы по игре в судоку",
                gameFeatures: "Игровые функции",
                // Info section detailed content
                logicTitle: "Улучшение логического мышления",
                logicDesc: "Тренируйте способности логического мышления мозга через рассуждения и исключение",
                memoryTitle: "Улучшение памяти", 
                memoryDesc: "Во время решения необходимо запоминать позиции чисел и возможности",
                focusTitle: "Улучшение концентрации",
                focusDesc: "Сосредоточенное решение проблем помогает тренировать способность к концентрации",
                cognitiveTitle: "Замедление когнитивного упадка",
                cognitiveDesc: "Регулярная практика судоку поддерживает активность мозга",
                stressTitle: "Снижение стресса",
                stressDesc: "Погружение в числовые игры может эффективно расслабить тело и разум",
                rowRuleTitle: "Правило строк",
                rowRuleDesc: "Каждая строка должна содержать цифры 1-9 без повторения",
                colRuleTitle: "Правило столбцов", 
                colRuleDesc: "Каждый столбец должен содержать цифры 1-9 без повторения",
                boxRuleTitle: "Правило блоков",
                boxRuleDesc: "Каждый блок 3×3 должен содержать цифры 1-9 без повторения",
                basicTechniques: "Базовые техники",
                advancedTechniques: "Продвинутые техники",
                solvingStrategy: "Стратегия решения",
                uniqueMethodTitle: "Метод единственного числа",
                uniqueMethodDesc: "В строке, столбце или блоке есть только одна позиция для определенной цифры",
                eliminationTitle: "Метод исключения",
                eliminationDesc: "Используйте известные числа для исключения возможностей в других позициях",
                candidateTitle: "Числа-кандидаты",
                candidateDesc: "Используйте режим карандаша для отметки возможных чисел для каждой ячейки",
                hiddenSingleTitle: "Скрытые одиночные кандидаты",
                hiddenSingleDesc: "В определенной области число может появиться только в одной позиции",
                nakedSubsetTitle: "Голые подмножества",
                nakedSubsetDesc: "Две или более ячеек могут содержать только одни и те же несколько чисел",
                pointingTitle: "Указывающие пары",
                pointingDesc: "Используйте направления чисел внутри блоков для исключения других областей",
                startSimpleTitle: "Начните с простого",
                startSimpleDesc: "Сначала заполните подтвержденные числа, затем обработайте сложные области",
                sectionTitle: "Обработка секций",
                sectionDesc: "Сосредоточьтесь на строках, столбцах или блоках с большим количеством чисел",
                patientTitle: "Оставайтесь терпеливыми",
                patientDesc: "При возникновении трудностей сделайте паузу и проанализируйте с разных углов",
                hintFeatureTitle: "Умная подсказка",
                hintFeatureDesc: "При возникновении трудностей вы можете использовать функцию подсказки для помощи",
                pencilFeatureTitle: "Режим карандаша",
                pencilFeatureDesc: "Отмечайте числа-кандидаты и помогайте записывать процесс мышления",
                undoFeatureTitle: "Отменить/Повторить",
                undoFeatureDesc: "Отменяйте неправильные операции в любое время, не беспокоясь об ошибках",
                dailyFeatureTitle: "Ежедневный вызов",
                dailyFeatureDesc: "Получайте новые головоломки каждый день для поддержания привычки к практике",
                achievementFeatureTitle: "Система достижений",
                achievementFeatureDesc: "Получайте звездные награды и значки достижений, выполняя вызовы",
                multiLanguageTitle: "Многоязычная поддержка",
                multiLanguageDesc: "Поддерживает 7 языков для удовольствия игроков по всему миру",
                shopBalance: "Текущий баланс:",
                shopDescription: "Используйте звезды для обмена на красивые темы и полезные инструменты",
                hintsPack: "Пакет подсказок",
                hintsPackDesc: "Получите 5 дополнительных возможностей подсказок для помощи в решении сложных головоломок",
                themePackA: "Пакет темы Майяр А",
                themePackADesc: "Теплая карамельная цветовая тема для комфортного визуального опыта",
                themePackB: "Пакет темы Майяр Б",
                themePackBDesc: "Элегантная тема цвета молочного кофе для создания мирной игровой атмосферы",
                numberStyleX: "Стиль чисел X",
                numberStyleXDesc: "Красивый стиль шрифта чисел для более персонализированного игрового интерфейса",
                timeFreezeCard: "Карта заморозки времени",
                timeFreezeCardDesc: "Приостановите таймер на 30 секунд в игре для дополнительного времени на размышления",
                errorChecker: "Проверщик ошибок",
                errorCheckerDesc: "Автоматически проверяйте и отмечайте все ошибки для более легкого решения",
                buyNow: "Обменять сейчас"
            },
            fr: {
                newGame: "Nouveau jeu",
                hint: "Indice",
                pencilMode: "Mode crayon",
                eraser: "Gomme",
                undo: "Annuler",
                redo: "Refaire",
                pause: "Pause",
                stars: "Étoiles",
                streak: "Série",
                dailyChallenge: "Défi quotidien",
                dailyChallengeDesc: "Complétez le sudoku d'aujourd'hui pour des récompenses bonus!",
                incomplete: "Incomplet",
                complete: "Complet",
                achievements: "Derniers succès",
                selectDifficulty: "Sélectionner la difficulté",
                selectLevel: "Choisissez votre niveau de défi",
                easy: "Facile",
                medium: "Moyen",
                hard: "Difficile",
                expert: "Expert",
                easyDesc: "Convivial pour débutants",
                mediumDesc: "Défi modéré",
                hardDesc: "Joueurs avancés",
                expertDesc: "Maître de sudoku",
                congratulations: "Félicitations!",
                newRecord: "Nouveau record!",
                timeFormat: "Temps: {time}",
                trophiesAchievements: "Trophées et succès",
                shopExchange: "Boutique et échange",
                settings: "Paramètres",
                generalSettings: "Paramètres généraux",
                sound: "Son",
                errorHighlight: "Surlignage d'erreur",
                autoSave: "Sauvegarde automatique",
                themeSelection: "Sélection de thème",
                languageSettings: "Paramètres de langue",
                keyboardShortcuts: "Raccourcis clavier",
                helpSupport: "Aide et support",
                tutorial: "Tutoriel",
                feedback: "Commentaires",
                about: "À propos du jeu",
                continueGame: "Continuer le jeu",
                todayChallenge: "Défi d'aujourd'hui",
                streakDays: "Vous vous êtes connecté {days} jours consécutifs",
                challengeRewards: "Récompenses d'aujourd'hui",
                basicReward: "Récompense de base",
                streakReward: "Récompense de série",
                speedReward: "Récompense de vitesse",
                trophyChance: "Chance de trophée",
                // Info section detailed content
                logicTitle: "Améliorer la pensée logique",
                logicDesc: "Entraînez les capacités de pensée logique du cerveau par le raisonnement et l'élimination",
                memoryTitle: "Améliorer la mémoire", 
                memoryDesc: "Pendant la résolution, il faut mémoriser les positions et possibilités des nombres",
                focusTitle: "Améliorer la concentration",
                focusDesc: "Entraînez la capacité de concentration par la résolution de problèmes focalisée",
                cognitiveTitle: "Prévenir la dégénérescence cognitive",
                cognitiveDesc: "La pratique régulière du sudoku active le cerveau",
                stressTitle: "Réduire le stress",
                stressDesc: "Détendez le corps et l'esprit en vous immergeant dans le jeu de nombres",
                rowRuleTitle: "Règle de ligne",
                rowRuleDesc: "Chaque ligne doit contenir les nombres 1-9 sans répétition",
                colRuleTitle: "Règle de colonne", 
                colRuleDesc: "Chaque colonne doit contenir les nombres 1-9 sans répétition",
                boxRuleTitle: "Règle de bloc",
                boxRuleDesc: "Chaque bloc 3×3 doit contenir les nombres 1-9 sans répétition",
                uniqueMethodTitle: "Méthode du nombre unique",
                uniqueMethodDesc: "Dans une ligne, colonne ou bloc, il n'y a qu'une position pour un nombre spécifique",
                eliminationTitle: "Méthode d'élimination",
                eliminationDesc: "Utilisez les nombres connus pour éliminer les possibilités dans d'autres positions",
                candidateTitle: "Nombres candidats",
                candidateDesc: "Utilisez le mode crayon pour marquer les nombres possibles pour chaque cellule",
                hiddenSingleTitle: "Candidats uniques cachés",
                hiddenSingleDesc: "Dans une zone spécifique, un nombre ne peut apparaître qu'à une seule position",
                nakedSubsetTitle: "Sous-ensembles nus",
                nakedSubsetDesc: "Deux cellules ou plus ne peuvent contenir que les mêmes quelques nombres",
                pointingTitle: "Paires pointant",
                pointingDesc: "Utilisez la direction des nombres dans le bloc pour éliminer d'autres zones",
                startSimpleTitle: "Commencer par le simple",
                startSimpleDesc: "Remplissez d'abord les nombres certains, traitez les zones complexes plus tard",
                sectionTitle: "Traitement par sections",
                sectionDesc: "Concentrez-vous sur les lignes, colonnes et blocs avec beaucoup de nombres",
                patientTitle: "Restez patient",
                patientDesc: "Face aux difficultés, arrêtez-vous et analysez sous différents angles",
                hintFeatureTitle: "Indices intelligents",
                hintFeatureDesc: "Obtenez du soutien grâce à la fonction d'indices face aux difficultés",
                pencilFeatureTitle: "Mode crayon",
                pencilFeatureDesc: "Marquez les nombres candidats et enregistrez le processus de réflexion",
                undoFeatureTitle: "Annuler/Refaire",
                undoFeatureDesc: "Annulez à tout moment les opérations incorrectes, ne vous inquiétez pas",
                dailyFeatureTitle: "Défi quotidien",
                dailyFeatureDesc: "Obtenez de nouveaux puzzles chaque jour pour maintenir l'habitude de pratique",
                achievementFeatureTitle: "Système de succès",
                achievementFeatureDesc: "Obtenez des récompenses étoiles et des badges de succès en relevant des défis",
                multiLanguageTitle: "Support multilingue",
                multiLanguageDesc: "Supporte 7 langues pour que les joueurs du monde entier puissent s'amuser"
            }
        };

        // Game state
        let currentLanguage = 'zh';
        let currentPage = 'game';
        let gameBoard = Array(9).fill().map(() => Array(9).fill(0));
        let solution = Array(9).fill().map(() => Array(9).fill(0));
        let givenCells = Array(9).fill().map(() => Array(9).fill(false));
        let selectedCell = null;
        let selectedNumber = null;
        let pencilMode = false;
        let gameTimer = 0;
        let timerInterval = null;
        let gamePaused = false;
        let hintsLeft = 3;
        let gameHistory = [];
        let historyIndex = -1;
        let currentDifficulty = 'easy';

        // User data
        let userStats = {
            stars: 1248,
            streak: 7,
            totalGames: 156,
            totalTime: 88200,
            completedEasy: 45,
            completedMedium: 78,
            completedHard: 23,
            completedExpert: 10,
            lastSavedGame: null
        };

        // Daily Challenge state
        let dailyChallengeCompleted = false;
        let challengeProgress = 0;
        let challengeStartTime = null;
        let isDailyChallengeMode = false;

        // Settings
        let gameSettings = {
            soundEnabled: true,
            errorHighlight: true,
            autoSave: true,
            currentTheme: 'a'
        };

        // Game state - add saved game tracking
        let savedGameState = null;
        let hasSavedGame = false;

        // Default difficulty for new users
        let defaultDifficulty = 'easy';

        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing game...');
            try {
                loadGameData();
                createBoard();
                createNumberPad();
                setupEventListeners();
                setupNavigation();
                checkForSavedGame();
                startNewGame(defaultDifficulty);
                initializeDailyChallenge();
                setupDifficultySelector();
                
                // Update language after all DOM elements are ready
                console.log('Updating language to:', currentLanguage);
                updateLanguage();
                updateAllDisplays();
                
                console.log('Game initialized successfully!');
            } catch (error) {
                console.error('Error initializing game:', error);
            }
        });

        // Page Navigation System
        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetPage = btn.dataset.page;
                    if (targetPage) {
                        navigateToPage(targetPage);
                    }
                });
            });
        }

        function navigateToPage(page) {
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            const activeBtn = document.querySelector(`.nav-btn[data-page="${page}"]`);
            if (activeBtn) activeBtn.classList.add('active');

            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            
            let targetPageElement;
            switch(page) {
                case 'challenge':
                    targetPageElement = document.getElementById('challengePage');
                    updateChallengeDisplay();
                    break;
                case 'trophy':
                    targetPageElement = document.getElementById('trophyPage');
                    updateTrophyDisplay();
                    break;
                case 'shop':
                    targetPageElement = document.getElementById('shopPage');
                    updateShopDisplay();
                    break;
                case 'settings':
                    targetPageElement = document.getElementById('settingsPage');
                    updateSettingsDisplay();
                    break;
                default:
                    targetPageElement = document.getElementById('gamePage');
                    break;
            }
            
            if (targetPageElement) {
                targetPageElement.classList.add('active');
                currentPage = page;
            }
        }

        // Game Board Creation
        function createBoard() {
            const board = document.getElementById('sudokuBoard');
            if (!board) {
                console.error('Sudoku board element not found!');
                return;
            }
            
            board.innerHTML = '';
            
            for (let i = 0; i < 81; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.addEventListener('click', () => selectCell(i));
                board.appendChild(cell);
            }
            console.log('Board created with 81 cells');
        }

        function createNumberPad() {
            const numberPad = document.getElementById('numberPad');
            if (!numberPad) {
                console.error('Number pad element not found!');
                return;
            }
            
            numberPad.innerHTML = '';
            
            for (let i = 1; i <= 9; i++) {
                const btn = document.createElement('button');
                btn.className = 'number-btn';
                btn.textContent = i;
                btn.addEventListener('click', () => selectNumber(i));
                numberPad.appendChild(btn);
            }
            console.log('Number pad created');
        }

        // Sudoku Generation
        function generateSudoku(difficulty) {
            console.log('Generating sudoku with difficulty:', difficulty);
            
            // Initialize empty board
            gameBoard = Array(9).fill().map(() => Array(9).fill(0));
            solution = Array(9).fill().map(() => Array(9).fill(0));
            givenCells = Array(9).fill().map(() => Array(9).fill(false));
            
            // Generate a complete valid sudoku
            generateCompleteSudoku(solution);
            
            // Copy solution to game board
            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    gameBoard[i][j] = solution[i][j];
                }
            }
            
            // Remove numbers based on difficulty
            const cellsToRemove = {
                easy: 35,
                medium: 45,
                hard: 55,
                expert: 65
            };
            
            removeCells(cellsToRemove[difficulty]);
            markGivenCells();
            console.log('Sudoku generated successfully');
        }

        function generateCompleteSudoku(board) {
            function fillBoard(board) {
                for (let row = 0; row < 9; row++) {
                    for (let col = 0; col < 9; col++) {
                        if (board[row][col] === 0) {
                            const numbers = [1,2,3,4,5,6,7,8,9].sort(() => Math.random() - 0.5);
                            for (let num of numbers) {
                                if (isValidMove(board, row, col, num)) {
                                    board[row][col] = num;
                                    if (fillBoard(board)) return true;
                                    board[row][col] = 0;
                                }
                            }
                            return false;
                        }
                    }
                }
                return true;
            }
            
            fillBoard(board);
        }

        function removeCells(count) {
            const cells = [];
            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    cells.push([i, j]);
                }
            }
            
            cells.sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < count && i < cells.length; i++) {
                const [row, col] = cells[i];
                gameBoard[row][col] = 0;
            }
        }

        function markGivenCells() {
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    givenCells[row][col] = gameBoard[row][col] !== 0;
                }
            }
        }

        function isValidMove(board, row, col, num) {
            // Check row
            for (let x = 0; x < 9; x++) {
                if (x !== col && board[row][x] === num) return false;
            }
            
            // Check column
            for (let x = 0; x < 9; x++) {
                if (x !== row && board[x][col] === num) return false;
            }
            
            // Check 3x3 box
            let startRow = row - row % 3;
            let startCol = col - col % 3;
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    if ((i + startRow !== row || j + startCol !== col) && 
                        board[i + startRow][j + startCol] === num) {
                        return false;
                    }
                }
            }
            
            return true;
        }

        // Game Interaction
        function selectCell(index) {
            const row = Math.floor(index / 9);
            const col = index % 9;
            
            selectedCell = { row, col, index };
            updateBoardDisplay();
        }

        function selectNumber(num) {
            selectedNumber = num;
            
            // Update number pad display
            document.querySelectorAll('.number-btn').forEach((btn, index) => {
                btn.classList.toggle('selected', index + 1 === num);
            });
            
            // If cell is selected, place number
            if (selectedCell && !givenCells[selectedCell.row][selectedCell.col]) {
                placeNumber(selectedCell.row, selectedCell.col, num);
            }
        }

        function placeNumber(row, col, num) {
            if (givenCells[row][col]) return;
            
            saveGameState();
            gameBoard[row][col] = num;
            updateBoardDisplay();
            
            // Auto-save current game state
            saveCurrentGameState();
            
            if (isDailyChallengeMode) {
                updateChallengeProgress();
            }
            
            checkWin();
        }

        function updateBoardDisplay() {
            const cells = document.querySelectorAll('.cell');
            
            cells.forEach((cell, index) => {
                const row = Math.floor(index / 9);
                const col = index % 9;
                const value = gameBoard[row][col];
                
                cell.textContent = value === 0 ? '' : value;
                
                // Clear all classes
                cell.className = 'cell';
                
                // Add given cell class
                if (givenCells[row][col]) {
                    cell.classList.add('given');
                }
                
                // Add selected class
                if (selectedCell && selectedCell.index === index) {
                    cell.classList.add('selected');
                }
                
                // Add highlight for same row/col/box
                if (selectedCell) {
                    const selectedRow = selectedCell.row;
                    const selectedCol = selectedCell.col;
                    
                    if (row === selectedRow || col === selectedCol || 
                        (Math.floor(row / 3) === Math.floor(selectedRow / 3) && 
                         Math.floor(col / 3) === Math.floor(selectedCol / 3))) {
                        cell.classList.add('highlight');
                    }
                }
                
                // Check for errors if setting is enabled
                if (gameSettings.errorHighlight && value !== 0 && !isValidMove(gameBoard, row, col, value)) {
                    cell.classList.add('error');
                }
            });
        }

        // Game Logic
        function checkWin() {
            // Check if board is complete and valid
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (gameBoard[row][col] === 0) return false;
                }
            }
            
            // Additional validation
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (!isValidPlacement(gameBoard, row, col, gameBoard[row][col])) {
                        return false;
                    }
                }
            }
            
            // Game completed successfully
            showWinAnimation();
            stopTimer();
            updateStatsOnWin();
            
            if (isDailyChallengeMode) {
                completeDailyChallenge();
            }
        }

        function isValidPlacement(board, row, col, num) {
            // Check row
            for (let x = 0; x < 9; x++) {
                if (x !== col && board[row][x] === num) return false;
            }
            
            // Check column
            for (let x = 0; x < 9; x++) {
                if (x !== row && board[x][col] === num) return false;
            }
            
            // Check 3x3 box
            let startRow = row - row % 3;
            let startCol = col - col % 3;
            for (let i = 0; i < 3; i++) {
                for (let j = 0; j < 3; j++) {
                    if ((i + startRow !== row || j + startCol !== col) && 
                        board[i + startRow][j + startCol] === num) {
                        return false;
                    }
                }
            }
            
            return true;
        }

        function showWinAnimation() {
            const animation = document.createElement('div');
            animation.className = 'success-animation';
            animation.textContent = translations[currentLanguage].congratulations;
            document.body.appendChild(animation);
            
            setTimeout(() => {
                if (document.body.contains(animation)) {
                    document.body.removeChild(animation);
                }
            }, 2000);
        }

        function updateStatsOnWin() {
            switch(currentDifficulty) {
                case 'easy':
                    userStats.completedEasy++;
                    userStats.stars += 10;
                    break;
                case 'medium':
                    userStats.completedMedium++;
                    userStats.stars += 20;
                    break;
                case 'hard':
                    userStats.completedHard++;
                    userStats.stars += 30;
                    break;
                case 'expert':
                    userStats.completedExpert++;
                    userStats.stars += 50;
                    break;
            }
            
            userStats.totalGames++;
            userStats.totalTime += gameTimer;
            
            updateAllDisplays();
            saveGameData();
        }

        // History System
        function saveGameState() {
            gameHistory = gameHistory.slice(0, historyIndex + 1);
            gameHistory.push(JSON.parse(JSON.stringify(gameBoard)));
            historyIndex++;
        }

        function undo() {
            if (historyIndex > 0) {
                historyIndex--;
                gameBoard = JSON.parse(JSON.stringify(gameHistory[historyIndex]));
                updateBoardDisplay();
                if (isDailyChallengeMode) {
                    updateChallengeProgress();
                }
            }
        }

        function redo() {
            if (historyIndex < gameHistory.length - 1) {
                historyIndex++;
                gameBoard = JSON.parse(JSON.stringify(gameHistory[historyIndex]));
                updateBoardDisplay();
                if (isDailyChallengeMode) {
                    updateChallengeProgress();
                }
            }
        }

        // Timer System
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                if (!gamePaused) {
                    gameTimer++;
                    updateTimerDisplay();
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        // Enhanced pause functionality
        function pauseGame() {
            gamePaused = !gamePaused;
            const pauseBtn = document.getElementById('pauseBtn');
            if (pauseBtn) {
                pauseBtn.textContent = gamePaused ? '继续' : '暂停';
                pauseBtn.classList.toggle('active', gamePaused);
            }
            
            // Remove blur effect - just stop the timer but keep board visible
            // const board = document.getElementById('sudokuBoard');
            // if (board) {
            //     if (gamePaused) {
            //         board.style.filter = 'blur(10px)';
            //         board.style.pointerEvents = 'none';
            //     } else {
            //         board.style.filter = 'none';
            //         board.style.pointerEvents = 'auto';
            //     }
            // }
            
            // Save game state when pausing
            if (gamePaused) {
                saveCurrentGameState();
            }
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            if (timerElement) {
                const minutes = Math.floor(gameTimer / 60);
                const seconds = gameTimer % 60;
                timerElement.textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // Game Management
        function startNewGame(difficulty) {
            console.log('Starting new game with difficulty:', difficulty);
            currentDifficulty = difficulty;
            gameTimer = 0;
            gamePaused = false;
            hintsLeft = 3;
            gameHistory = [];
            historyIndex = -1;
            isDailyChallengeMode = false;
            
            generateSudoku(difficulty);
            saveGameState();
            updateBoardDisplay();
            startTimer();
            updateUI();
        }

        function useHint() {
            if (hintsLeft > 0 && selectedCell && !givenCells[selectedCell.row][selectedCell.col]) {
                const { row, col } = selectedCell;
                if (gameBoard[row][col] === 0) {
                    saveGameState();
                    gameBoard[row][col] = solution[row][col];
                    hintsLeft--;
                    updateBoardDisplay();
                    updateUI();
                    
                    if (isDailyChallengeMode) {
                        updateChallengeProgress();
                    }
                    
                    checkWin();
                }
            }
        }

        function eraseCell() {
            if (selectedCell && !givenCells[selectedCell.row][selectedCell.col]) {
                saveGameState();
                gameBoard[selectedCell.row][selectedCell.col] = 0;
                updateBoardDisplay();
                
                if (isDailyChallengeMode) {
                    updateChallengeProgress();
                }
            }
        }

        // Daily Challenge System
        function initializeDailyChallenge() {
            updateChallengeCountdown();
            startChallengeCountdownTimer();
            
            // Check if challenge was completed today
            const today = new Date().toDateString();
            const lastCompleted = localStorage.getItem('lastChallengeCompleted');
            if (lastCompleted === today) {
                dailyChallengeCompleted = true;
            }
            
            updateChallengeDisplay();
        }

        function updateChallengeCountdown() {
            const countdownElement = document.getElementById('challengeCountdown');
            if (!countdownElement) return;
            
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const timeLeft = tomorrow - now;
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            countdownElement.textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function startChallengeCountdownTimer() {
            setInterval(updateChallengeCountdown, 1000);
        }

        function startDailyChallenge() {
            if (dailyChallengeCompleted) {
                showNotification('今日挑战已完成！', 'warning');
                return;
            }
            
            isDailyChallengeMode = true;
            challengeStartTime = Date.now();
            
            navigateToPage('game');
            startNewGame('medium');
            
            showNotification('每日挑战开始！');
        }

        function updateChallengeProgress() {
            if (!isDailyChallengeMode) return;
            
            let filledCells = 0;
            const totalCells = 81;
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (gameBoard[row][col] !== 0) {
                        filledCells++;
                    }
                }
            }
            
            challengeProgress = Math.round((filledCells / totalCells) * 100);
            const progressBar = document.getElementById('challengeProgressBar');
            if (progressBar) {
                progressBar.style.width = challengeProgress + '%';
            }
        }

        function completeDailyChallenge() {
            if (!isDailyChallengeMode || dailyChallengeCompleted) return;
            
            dailyChallengeCompleted = true;
            isDailyChallengeMode = false;
            
            const timeBonus = calculateTimeBonus();
            const streakBonus = userStats.streak * 2;
            const totalStars = 20 + timeBonus + streakBonus;
            
            userStats.streak++;
            userStats.stars += totalStars;
            
            const today = new Date().toDateString();
            localStorage.setItem('lastChallengeCompleted', today);
            
            updateAllDisplays();
            saveGameData();
            
            showNotification(`每日挑战完成！获得 ${totalStars} 颗星星！`);
        }

        function calculateTimeBonus() {
            if (!challengeStartTime) return 0;
            
            const timeElapsed = (Date.now() - challengeStartTime) / 1000;
            const maxBonus = 10;
            const targetTime = 300;
            
            if (timeElapsed <= targetTime) {
                return maxBonus;
            } else if (timeElapsed <= targetTime * 2) {
                return Math.floor(maxBonus * (2 - timeElapsed / targetTime));
            }
            return 0;
        }

        function updateChallengeDisplay() {
            const challengeBtn = document.getElementById('challengeStartBtn');
            const dateElement = document.getElementById('challengeDate');
            const challengeStatusDisplay = document.getElementById('challengeStatusDisplay');
            const challengeDateDisplay = document.getElementById('challengeDateDisplay');
            
            // Update date displays
            const today = new Date().toLocaleDateString('zh-CN');
            if (dateElement) {
                dateElement.textContent = today;
            }
            if (challengeDateDisplay) {
                challengeDateDisplay.textContent = today;
            }
            
            if (challengeBtn) {
                if (dailyChallengeCompleted) {
                    challengeBtn.textContent = '已完成';
                    challengeBtn.classList.add('completed');
                    challengeBtn.disabled = true;
                } else {
                    challengeBtn.textContent = '开始挑战';
                    challengeBtn.classList.remove('completed');
                    challengeBtn.disabled = false;
                }
            }

            // Update new challenge status display
            if (challengeStatusDisplay) {
                if (dailyChallengeCompleted) {
                    challengeStatusDisplay.textContent = '已完成';
                } else {
                    challengeStatusDisplay.textContent = '未完成';
                }
            }
        }

        // Simple placeholders for other systems
        function updateTrophyDisplay() {
            console.log('Trophy display updated');
        }

        function updateShopDisplay() {
            const balanceElement = document.getElementById('shopBalance');
            if (balanceElement) {
                balanceElement.textContent = `⭐ ${userStats.stars}`;
            }
        }

        function updateSettingsDisplay() {
            console.log('Settings display updated');
        }

        function updateLanguage() {
            const lang = currentLanguage;
            const t = translations[lang] || translations.zh;
            
            console.log('updateLanguage called with language:', lang);
            console.log('Translation object exists:', !!translations[lang]);
            console.log('Available keys in translation:', Object.keys(t).length);
            
            // Update main buttons and interface elements
            const elements = {
                'newGameBtn': t.newGame,
                'hintBtn': `${t.hint} (${hintsLeft})`,
                'pencilBtn': t.pencilMode,
                'eraseBtn': t.eraser,
                'undoBtn': t.undo,
                'redoBtn': t.redo,
                'pauseBtn': t.pause,
                'dailyChallengeNav': t.dailyChallenge,
                'trophyNav': t.trophiesAchievements,
                'shopNav': t.shopExchange
            };
            
            Object.entries(elements).forEach(([id, text]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = text;
                    console.log('Updated element:', id, 'with text:', text);
                } else {
                    console.warn('Element not found:', id);
                }
            });

            // Update difficulty selector
            const currentDifficultyElement = document.getElementById('currentDifficulty');
            if (currentDifficultyElement) {
                currentDifficultyElement.textContent = `🌱 ${t[currentDifficulty]}`;
            }

            // Update difficulty dropdown options
            const difficultyOptions = document.querySelectorAll('.difficulty-option');
            const difficultyData = {
                easy: { icon: '🌱', name: t.easy, desc: t.easyDesc },
                medium: { icon: '🌿', name: t.medium, desc: t.mediumDesc },
                hard: { icon: '🌳', name: t.hard, desc: t.hardDesc },
                expert: { icon: '🔥', name: t.expert, desc: t.expertDesc }
            };

            difficultyOptions.forEach(option => {
                const difficulty = option.dataset.difficulty;
                const data = difficultyData[difficulty];
                if (data) {
                    const nameElement = option.querySelector('.difficulty-name');
                    const descElement = option.querySelector('.difficulty-desc');
                    if (nameElement) nameElement.textContent = `${data.icon} ${data.name}`;
                    if (descElement) descElement.textContent = data.desc;
                }
            });

            // Update continue game button
            const continueText = document.querySelector('.continue-text');
            if (continueText && t.continueGame) {
                continueText.textContent = t.continueGame;
            }

            // Update daily challenge section
            const challengeText = document.querySelector('.challenge-text');
            const challengeStatusDisplay = document.getElementById('challengeStatusDisplay');
            if (challengeText && t.todayChallenge) challengeText.textContent = t.todayChallenge;
            if (challengeStatusDisplay) {
                challengeStatusDisplay.textContent = dailyChallengeCompleted ? t.complete : t.incomplete;
            }

            // Update streak display
            const streakText = document.querySelector('.streak-text');
            if (streakText && userStats && t.streakDays) {
                streakText.innerHTML = t.streakDays.replace('{days}', `<span id="streakDays">${userStats.streak}</span>`);
            }

            // Update info section title
            const infoHeaderTitle = document.querySelector('.info-header h3');
            if (infoHeaderTitle && t.freeGameTitle) {
                infoHeaderTitle.textContent = `📚 ${t.freeGameTitle}`;
            }

            // Update modal if exists
            const modalHeader = document.querySelector('.modal-header h2');
            const modalSubtext = document.querySelector('.modal-header p');
            if (modalHeader) modalHeader.textContent = t.selectDifficulty;
            if (modalSubtext) modalSubtext.textContent = t.selectLevel;

            // Update difficulty buttons in modal
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                const difficulty = btn.dataset.difficulty;
                if (difficulty && difficultyData[difficulty]) {
                    const data = difficultyData[difficulty];
                    btn.innerHTML = `${data.icon} ${data.name}<br><small>${data.desc}</small>`;
                }
            });

            // Update language selectors
            const languageSelector = document.getElementById('languageSelector');
            const settingsLanguageSelector = document.getElementById('settingsLanguageSelector');
            
            if (languageSelector) {
                languageSelector.value = currentLanguage;
            }
            if (settingsLanguageSelector) {
                settingsLanguageSelector.value = currentLanguage;
            }

            // Update all elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (t[key]) {
                    element.textContent = t[key];
                }
            });

            // Update challenge page elements
            const challengeTitle = document.querySelector('.challenge-title');
            if (challengeTitle) challengeTitle.textContent = `📅 ${t.dailyChallenge}`;

            const challengeStartBtn = document.getElementById('challengeStartBtn');
            if (challengeStartBtn) {
                challengeStartBtn.textContent = dailyChallengeCompleted ? t.complete : '开始挑战';
            }

            // Update shop page
            const shopHeader = document.querySelector('.shop-header h1');
            const shopBalance = document.getElementById('shopBalance');
            const shopDescription = document.querySelector('.shop-header p');

            if (shopHeader) shopHeader.textContent = `🛒 ${t.shopExchange}`;
            if (shopBalance) shopBalance.textContent = `${t.shopBalance}⭐ ${userStats.stars}`;
            if (shopDescription && t.shopDescription) shopDescription.textContent = t.shopDescription;

            // Update trophy page
            const trophyHeader = document.querySelector('.trophy-header h1');
            if (trophyHeader) trophyHeader.textContent = `🏆 ${t.trophiesAchievements}`;

            // Update settings page sections
            const settingsSections = document.querySelectorAll('.settings-section h2');
            const settingsLabels = [
                `🔧 ${t.generalSettings}`,
                `🎨 ${t.themeSelection}`,
                `🌍 ${t.languageSettings}`,
                `⌨️ ${t.keyboardShortcuts}`,
                `📚 ${t.helpSupport}`
            ];

            settingsSections.forEach((section, index) => {
                if (settingsLabels[index]) {
                    section.textContent = settingsLabels[index];
                }
            });

            console.log('Language updated to:', currentLanguage);
            
            // Update detailed info content
            console.log('Calling updateInfoContent...');
            updateInfoContent(t);
            console.log('updateInfoContent completed');
            
            // Update page-specific content
            updatePageSpecificContent(t);
        }

        function updateInfoContent(t) {
            console.log('updateInfoContent called with translations for language:', currentLanguage);
            
            // Fallback to Chinese translations if keys are missing
            const fallback = translations.zh;
            
            // Helper function to get translation with fallback
            function getTranslation(key) {
                const result = t[key] || fallback[key] || key;
                if (!t[key] && fallback[key]) {
                    console.log('Using fallback for key:', key);
                }
                return result;
            }
            
            // Update benefits section
            const benefitsSection = document.querySelector('.info-benefits');
            console.log('Benefits section found:', !!benefitsSection);
            if (benefitsSection) {
                const title = benefitsSection.querySelector('h4');
                const items = benefitsSection.querySelectorAll('li');
                
                if (title) {
                    title.textContent = `🧠 ${getTranslation('gameBenefits')}`;
                    console.log('Updated benefits title:', title.textContent);
                }
                if (items.length >= 5) {
                    items[0].innerHTML = `<strong>${getTranslation('logicTitle')}：</strong>${getTranslation('logicDesc')}`;
                    items[1].innerHTML = `<strong>${getTranslation('memoryTitle')}：</strong>${getTranslation('memoryDesc')}`;
                    items[2].innerHTML = `<strong>${getTranslation('focusTitle')}：</strong>${getTranslation('focusDesc')}`;
                    items[3].innerHTML = `<strong>${getTranslation('cognitiveTitle')}：</strong>${getTranslation('cognitiveDesc')}`;
                    items[4].innerHTML = `<strong>${getTranslation('stressTitle')}：</strong>${getTranslation('stressDesc')}`;
                    console.log('Updated', items.length, 'benefit items');
                }
            }

            // Update rules section
            const rulesSection = document.querySelector('.info-rules');
            if (rulesSection) {
                const title = rulesSection.querySelector('h4');
                const ruleItems = rulesSection.querySelectorAll('.rule-text');
                
                if (title) title.textContent = `🎯 ${getTranslation('gameRulesTitle')}`;
                if (ruleItems.length >= 3) {
                    ruleItems[0].innerHTML = `<strong>${getTranslation('rowRuleTitle')}：</strong>${getTranslation('rowRuleDesc')}`;
                    ruleItems[1].innerHTML = `<strong>${getTranslation('colRuleTitle')}：</strong>${getTranslation('colRuleDesc')}`;
                    ruleItems[2].innerHTML = `<strong>${getTranslation('boxRuleTitle')}：</strong>${getTranslation('boxRuleDesc')}`;
                }
            }

            // Update tips section
            const tipsSection = document.querySelector('.info-tips');
            if (tipsSection) {
                const title = tipsSection.querySelector('h4');
                const categories = tipsSection.querySelectorAll('.tip-category h5');
                const basicTips = tipsSection.querySelectorAll('.tip-category')[0]?.querySelectorAll('li');
                const advancedTips = tipsSection.querySelectorAll('.tip-category')[1]?.querySelectorAll('li');
                const strategyTips = tipsSection.querySelectorAll('.tip-category')[2]?.querySelectorAll('li');
                
                if (title) title.textContent = `💡 ${getTranslation('gameTips')}`;
                if (categories.length >= 3) {
                    categories[0].textContent = `🔍 ${getTranslation('basicTechniques')}`;
                    categories[1].textContent = `🎓 ${getTranslation('advancedTechniques')}`;
                    categories[2].textContent = `🏆 ${getTranslation('solvingStrategy')}`;
                }

                // Update basic techniques
                if (basicTips && basicTips.length >= 3) {
                    basicTips[0].innerHTML = `<strong>${getTranslation('uniqueMethodTitle')}：</strong>${getTranslation('uniqueMethodDesc')}`;
                    basicTips[1].innerHTML = `<strong>${getTranslation('eliminationTitle')}：</strong>${getTranslation('eliminationDesc')}`;
                    basicTips[2].innerHTML = `<strong>${getTranslation('candidateTitle')}：</strong>${getTranslation('candidateDesc')}`;
                }

                // Update advanced techniques
                if (advancedTips && advancedTips.length >= 3) {
                    advancedTips[0].innerHTML = `<strong>${getTranslation('hiddenSingleTitle')}：</strong>${getTranslation('hiddenSingleDesc')}`;
                    advancedTips[1].innerHTML = `<strong>${getTranslation('nakedSubsetTitle')}：</strong>${getTranslation('nakedSubsetDesc')}`;
                    advancedTips[2].innerHTML = `<strong>${getTranslation('pointingTitle')}：</strong>${getTranslation('pointingDesc')}`;
                }

                // Update strategy tips
                if (strategyTips && strategyTips.length >= 3) {
                    strategyTips[0].innerHTML = `<strong>${getTranslation('startSimpleTitle')}：</strong>${getTranslation('startSimpleDesc')}`;
                    strategyTips[1].innerHTML = `<strong>${getTranslation('sectionTitle')}：</strong>${getTranslation('sectionDesc')}`;
                    strategyTips[2].innerHTML = `<strong>${getTranslation('patientTitle')}：</strong>${getTranslation('patientDesc')}`;
                }
            }

            // Update features section
            const featuresSection = document.querySelector('.info-features');
            if (featuresSection) {
                const title = featuresSection.querySelector('h4');
                const featureTexts = featuresSection.querySelectorAll('.feature-text');
                
                if (title) title.textContent = `🎮 ${getTranslation('gameFeatures')}`;
                if (featureTexts.length >= 6) {
                    featureTexts[0].innerHTML = `<strong>${getTranslation('hintFeatureTitle')}：</strong>${getTranslation('hintFeatureDesc')}`;
                    featureTexts[1].innerHTML = `<strong>${getTranslation('pencilFeatureTitle')}：</strong>${getTranslation('pencilFeatureDesc')}`;
                    featureTexts[2].innerHTML = `<strong>${getTranslation('undoFeatureTitle')}：</strong>${getTranslation('undoFeatureDesc')}`;
                    featureTexts[3].innerHTML = `<strong>${getTranslation('dailyFeatureTitle')}：</strong>${getTranslation('dailyFeatureDesc')}`;
                    featureTexts[4].innerHTML = `<strong>${getTranslation('achievementFeatureTitle')}：</strong>${getTranslation('achievementFeatureDesc')}`;
                    featureTexts[5].innerHTML = `<strong>${getTranslation('multiLanguageTitle')}：</strong>${getTranslation('multiLanguageDesc')}`;
                }
            }
        }

        function saveGameData() {
            const gameData = {
                userStats,
                gameSettings,
                currentLanguage,
                dailyChallengeCompleted,
                lastSaved: new Date().toISOString()
            };
            
            try {
                localStorage.setItem('sudokuMasterData', JSON.stringify(gameData));
            } catch (e) {
                console.error('Failed to save game data:', e);
            }
        }

        function loadGameData() {
            try {
                const savedData = localStorage.getItem('sudokuMasterData');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    userStats = { ...userStats, ...data.userStats };
                    gameSettings = { ...gameSettings, ...data.gameSettings };
                    currentLanguage = data.currentLanguage || 'zh';
                    dailyChallengeCompleted = data.dailyChallengeCompleted || false;
                }
            } catch (e) {
                console.error('Failed to load game data:', e);
            }
        }

        function updateAllDisplays() {
            updateStatsDisplay();
            updateShopDisplay();
            updateTrophyDisplay();
            updateSettingsDisplay();
            updateChallengeDisplay();
        }

        function updateStatsDisplay() {
            const starsElement = document.getElementById('starsCount');
            const streakElement = document.getElementById('streakCount');
            const streakDaysElement = document.getElementById('streakDays');
            
            if (starsElement) starsElement.textContent = `⭐ ${userStats.stars}`;
            if (streakElement) streakElement.textContent = `🔥 ${userStats.streak}`;
            if (streakDaysElement) streakDaysElement.textContent = userStats.streak;
        }

        function updateUI() {
            const lang = currentLanguage;
            const t = translations[lang] || translations.zh;
            
            const hintBtn = document.getElementById('hintBtn');
            const difficultyElement = document.getElementById('difficulty');
            
            if (hintBtn) hintBtn.textContent = `${t.hint} (${hintsLeft})`;
            if (difficultyElement) difficultyElement.textContent = t[currentDifficulty];
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            
            if (notification && text) {
                text.textContent = message;
                notification.className = `notification ${type}`;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }

        // Event Listeners Setup
        function setupEventListeners() {
            console.log('Setting up event listeners...');
            
            // New Game button and modal
            const newGameBtn = document.getElementById('newGameBtn');
            const newGameModal = document.getElementById('newGameModal');
            const closeModal = document.getElementById('closeModal');
            
            if (newGameBtn && newGameModal) {
                newGameBtn.addEventListener('click', () => {
                    newGameModal.style.display = 'block';
                });
            }

            if (closeModal && newGameModal) {
                closeModal.addEventListener('click', () => {
                    newGameModal.style.display = 'none';
                });
            }

            // Difficulty buttons
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const difficulty = btn.dataset.difficulty;
                    startNewGame(difficulty);
                    if (newGameModal) {
                        newGameModal.style.display = 'none';
                    }
                });
            });

            // Action buttons
            const actionButtons = {
                'hintBtn': useHint,
                'eraseBtn': eraseCell,
                'undoBtn': undo,
                'redoBtn': redo,
                'pauseBtn': pauseGame
            };
            
            Object.entries(actionButtons).forEach(([id, handler]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('click', handler);
                }
            });

            // Continue game button
            const continueGameBtn = document.getElementById('continueGameBtn');
            if (continueGameBtn) {
                continueGameBtn.addEventListener('click', continueGame);
            }

            // Pencil mode toggle
            const pencilBtn = document.getElementById('pencilBtn');
            if (pencilBtn) {
                pencilBtn.addEventListener('click', () => {
                    pencilMode = !pencilMode;
                    pencilBtn.classList.toggle('active', pencilMode);
                });
            }

            // Language selectors
            const languageSelector = document.getElementById('languageSelector');
            const settingsLanguageSelector = document.getElementById('settingsLanguageSelector');
            
            if (languageSelector) {
                languageSelector.addEventListener('change', (e) => {
                    currentLanguage = e.target.value;
                    console.log('Language changed to:', currentLanguage);
                    updateLanguage();
                    updateAllDisplays();
                    updateChallengeDisplay();
                    saveGameData();
                });
            }

            if (settingsLanguageSelector) {
                settingsLanguageSelector.addEventListener('change', (e) => {
                    currentLanguage = e.target.value;
                    console.log('Language changed to:', currentLanguage);
                    updateLanguage();
                    updateAllDisplays();
                    updateChallengeDisplay();
                    saveGameData();
                });
            }

            // Daily Challenge
            const challengeStartBtn = document.getElementById('challengeStartBtn');
            if (challengeStartBtn) {
                challengeStartBtn.addEventListener('click', startDailyChallenge);
            }

            // New daily challenge button
            const dailyChallengeBtn = document.getElementById('dailyChallengeBtn');
            if (dailyChallengeBtn) {
                dailyChallengeBtn.addEventListener('click', startDailyChallenge);
            }

            // Collapsible info
            const gameInfoCard = document.getElementById('gameInfoCard');
            if (gameInfoCard) {
                gameInfoCard.addEventListener('click', () => {
                    const content = document.getElementById('gameInfoContent');
                    const toggle = document.querySelector('.info-toggle');
                    
                    if (content) content.classList.toggle('expanded');
                    if (toggle) toggle.classList.toggle('rotated');
                });
            }

            // New info section toggle
            const infoToggle = document.getElementById('infoToggle');
            if (infoToggle) {
                infoToggle.addEventListener('click', () => {
                    const content = document.getElementById('infoContent');
                    const toggle = document.querySelector('.toggle-icon');
                    
                    if (content) content.classList.toggle('expanded');
                    if (toggle) toggle.classList.toggle('rotated');
                });
            }

            // Keyboard support
            document.addEventListener('keydown', (e) => {
                if (e.key >= '1' && e.key <= '9') {
                    selectNumber(parseInt(e.key));
                } else if (e.key === 'Backspace' || e.key === 'Delete') {
                    eraseCell();
                } else if (e.key === ' ') {
                    e.preventDefault();
                    pauseGame();
                } else if (e.key.toLowerCase() === 'p') {
                    pencilMode = !pencilMode;
                    const pencilBtn = document.getElementById('pencilBtn');
                    if (pencilBtn) pencilBtn.classList.toggle('active', pencilMode);
                } else if (e.key.toLowerCase() === 'h') {
                    useHint();
                } else if (e.key.toLowerCase() === 'e') {
                    eraseCell();
                } else if (e.ctrlKey || e.metaKey) {
                    if (e.key === 'z') {
                        e.preventDefault();
                        undo();
                    } else if (e.key === 'y') {
                        e.preventDefault();
                        redo();
                    }
                }
            });

            // Click outside modal to close
            if (newGameModal) {
                newGameModal.addEventListener('click', (e) => {
                    if (e.target === e.currentTarget) {
                        e.currentTarget.style.display = 'none';
                    }
                });
            }

            // Auto-save
            setInterval(() => {
                if (gameSettings.autoSave) {
                    saveGameData();
                }
            }, 30000);
            
            console.log('Event listeners setup complete');
        }

        // Difficulty Selector Functions
        function setupDifficultySelector() {
            const difficultySelector = document.getElementById('difficultySelector');
            const difficultyDropdown = document.getElementById('difficultyDropdown');
            const dropdownArrow = document.querySelector('.dropdown-arrow');

            if (difficultySelector && difficultyDropdown) {
                difficultySelector.addEventListener('click', (e) => {
                    e.stopPropagation();
                    difficultyDropdown.classList.toggle('show');
                    if (dropdownArrow) dropdownArrow.classList.toggle('rotated');
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', () => {
                    difficultyDropdown.classList.remove('show');
                    if (dropdownArrow) dropdownArrow.classList.remove('rotated');
                });

                // Difficulty option selection
                document.querySelectorAll('.difficulty-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const difficulty = option.dataset.difficulty;
                        const difficultyName = option.querySelector('.difficulty-name').textContent;
                        
                        // Update display
                        const currentDifficultyElement = document.getElementById('currentDifficulty');
                        if (currentDifficultyElement) {
                            currentDifficultyElement.textContent = difficultyName;
                        }
                        
                        // Start new game with selected difficulty
                        startNewGame(difficulty);
                        
                        // Close dropdown
                        difficultyDropdown.classList.remove('show');
                        if (dropdownArrow) dropdownArrow.classList.remove('rotated');
                    });
                });
            }
        }

        // Check for saved game
        function checkForSavedGame() {
            const savedData = localStorage.getItem('sudokuCurrentGame');
            if (savedData) {
                try {
                    savedGameState = JSON.parse(savedData);
                    if (savedGameState && savedGameState.gameBoard) {
                        hasSavedGame = true;
                        showContinueGameButton();
                    }
                } catch (e) {
                    console.error('Error loading saved game:', e);
                }
            }
        }

        function showContinueGameButton() {
            const continueBtn = document.getElementById('continueGameBtn');
            const continueDetails = document.getElementById('continueDetails');
            
            if (continueBtn && savedGameState) {
                // Calculate completion percentage
                let filledCells = 0;
                for (let row = 0; row < 9; row++) {
                    for (let col = 0; col < 9; col++) {
                        if (savedGameState.gameBoard[row][col] !== 0) {
                            filledCells++;
                        }
                    }
                }
                const completionPercent = Math.round((filledCells / 81) * 100);
                
                // Update display
                const difficultyNames = {
                    easy: '简单',
                    medium: '中等', 
                    hard: '困难',
                    expert: '专家'
                };
                
                if (continueDetails) {
                    continueDetails.textContent = `${difficultyNames[savedGameState.difficulty] || '中等'}难度 - ${completionPercent}% 完成`;
                }
                continueBtn.style.display = 'block';
            }
        }

        function continueGame() {
            if (savedGameState) {
                gameBoard = savedGameState.gameBoard;
                solution = savedGameState.solution;
                givenCells = savedGameState.givenCells;
                currentDifficulty = savedGameState.difficulty;
                gameTimer = savedGameState.gameTimer || 0;
                hintsLeft = savedGameState.hintsLeft || 3;
                gameHistory = savedGameState.gameHistory || [];
                historyIndex = savedGameState.historyIndex || -1;
                
                updateBoardDisplay();
                updateUI();
                startTimer();
                
                // Hide continue button
                const continueBtn = document.getElementById('continueGameBtn');
                if (continueBtn) {
                    continueBtn.style.display = 'none';
                }
                hasSavedGame = false;
                
                console.log('Game continued from saved state');
            }
        }

        // Enhanced game state saving
        function saveCurrentGameState() {
            if (gameSettings.autoSave) {
                const gameState = {
                    gameBoard: JSON.parse(JSON.stringify(gameBoard)),
                    solution: JSON.parse(JSON.stringify(solution)),
                    givenCells: JSON.parse(JSON.stringify(givenCells)),
                    difficulty: currentDifficulty,
                    gameTimer: gameTimer,
                    hintsLeft: hintsLeft,
                    gameHistory: JSON.parse(JSON.stringify(gameHistory)),
                    historyIndex: historyIndex,
                    timestamp: Date.now()
                };
                
                try {
                    localStorage.setItem('sudokuCurrentGame', JSON.stringify(gameState));
                } catch (e) {
                    console.error('Failed to save current game state:', e);
                }
            }
        }

        // Function to update page-specific content
        function updatePageSpecificContent(t) {
            // Helper function to get translation with fallback
            function getTranslation(key) {
                return t[key] || translations.zh[key] || key;
            }
            
            // Update SEO Meta Tags - NEW FEATURE!
            updateMetaTags(t);
            
            // Update main page title
            const freeGameTitle = document.querySelector('.info-header h2');
            if (freeGameTitle) {
                freeGameTitle.textContent = getTranslation('freeGameTitle');
            }
            
            // Update Daily Challenge Page
            const challengePage = document.getElementById('challengePage');
            if (challengePage) {
                const challengeDesc = challengePage.querySelector('.challenge-header p');
                if (challengeDesc) challengeDesc.textContent = getTranslation('completeTodayRewards');
                
                const startBtn = challengePage.querySelector('#challengeStartBtn');
                if (startBtn) startBtn.textContent = getTranslation('startChallenge');
            }
            
            // Update Trophy Page
            const trophyPage = document.getElementById('trophyPage');
            if (trophyPage) {
                const masterTitle = trophyPage.querySelector('.trophy-title');
                if (masterTitle) masterTitle.textContent = getTranslation('sudokuMaster');
                
                const gameTimeLabel = trophyPage.querySelector('.game-time-label');
                if (gameTimeLabel) gameTimeLabel.textContent = getTranslation('totalGameTime');
                
                const puzzlesLabel = trophyPage.querySelector('.puzzles-label');
                if (puzzlesLabel) puzzlesLabel.textContent = getTranslation('completedPuzzles');
            }
            
            // Update Shop Page
            const shopPage = document.getElementById('shopPage');
            if (shopPage) {
                const balanceLabel = shopPage.querySelector('.balance-label');
                if (balanceLabel) balanceLabel.textContent = getTranslation('currentBalance');
                
                const shopDesc = shopPage.querySelector('.shop-description');
                if (shopDesc) shopDesc.textContent = getTranslation('useStarsExchange');
                
                // Update shop items
                const exchangeBtns = shopPage.querySelectorAll('.exchange-btn');
                exchangeBtns.forEach(btn => {
                    btn.textContent = getTranslation('exchangeNow');
                });
            }
        }

        // Function to update SEO meta tags dynamically
        function updateMetaTags(t) {
            // Helper function to get translation with fallback
            function getTranslation(key) {
                return t[key] || translations.zh[key] || key;
            }
            
            // Update page title
            const pageTitle = getTranslation('pageTitle');
            if (pageTitle && pageTitle !== 'pageTitle') {
                document.title = pageTitle;
            }
            
            // Update meta description
            const metaDesc = getTranslation('metaDescription');
            if (metaDesc && metaDesc !== 'metaDescription') {
                let descTag = document.querySelector('meta[name="description"]');
                if (descTag) {
                    descTag.setAttribute('content', metaDesc);
                }
            }
            
            // Update meta keywords
            const metaKeywords = getTranslation('metaKeywords');
            if (metaKeywords && metaKeywords !== 'metaKeywords') {
                let keywordsTag = document.querySelector('meta[name="keywords"]');
                if (keywordsTag) {
                    keywordsTag.setAttribute('content', metaKeywords);
                }
            }
            
            // Update Open Graph tags
            const ogDesc = getTranslation('ogDescription');
            const ogTitle = getTranslation('pageTitle');
            if (ogDesc && ogDesc !== 'ogDescription') {
                let ogDescTag = document.querySelector('meta[property="og:description"]');
                if (ogDescTag) {
                    ogDescTag.setAttribute('content', ogDesc);
                }
            }
            if (ogTitle && ogTitle !== 'pageTitle') {
                let ogTitleTag = document.querySelector('meta[property="og:title"]');
                if (ogTitleTag) {
                    ogTitleTag.setAttribute('content', ogTitle);
                }
            }
            
            // Update Twitter Card tags
            const twitterDesc = getTranslation('twitterDescription');
            const twitterTitle = getTranslation('pageTitle');
            if (twitterDesc && twitterDesc !== 'twitterDescription') {
                let twitterDescTag = document.querySelector('meta[property="twitter:description"]');
                if (twitterDescTag) {
                    twitterDescTag.setAttribute('content', twitterDesc);
                }
            }
            if (twitterTitle && twitterTitle !== 'pageTitle') {
                let twitterTitleTag = document.querySelector('meta[property="twitter:title"]');
                if (twitterTitleTag) {
                    twitterTitleTag.setAttribute('content', twitterTitle);
                }
            }
            
            // Update HTML lang attribute
            const htmlLang = getTranslation('htmlLang');
            if (htmlLang && htmlLang !== 'htmlLang') {
                document.documentElement.lang = htmlLang;
            }
            
            // Update Open Graph locale
            const ogLocale = getTranslation('ogLocale');
            if (ogLocale && ogLocale !== 'ogLocale') {
                let ogLocaleTag = document.querySelector('meta[property="og:locale"]');
                if (ogLocaleTag) {
                    ogLocaleTag.setAttribute('content', ogLocale);
                }
            }
            
            console.log('Meta tags updated for language:', currentLanguage);
        }
    </script>
</body>
</html> 