<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯­è¨€åˆ‡æ¢æµ‹è¯• - Sudoku Master</title>
    <meta name="description" content="æµ‹è¯•é¡µé¢">
    <meta name="keywords" content="æµ‹è¯•,å…³é”®è¯">
    <meta property="og:title" content="æµ‹è¯•æ ‡é¢˜">
    <meta property="og:description" content="æµ‹è¯•æè¿°">
    <meta property="og:locale" content="zh_CN">
    <meta property="twitter:title" content="æµ‹è¯•æ ‡é¢˜">
    <meta property="twitter:description" content="æµ‹è¯•æè¿°">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .language-selector {
            background: #D2691E;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 20px;
        }
        .meta-info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .test-button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; }
        .warning { background: #fff3cd; color: #856404; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª è¯­è¨€åˆ‡æ¢ä¸SEO Metaæ ‡ç­¾æµ‹è¯•</h1>
        
        <div>
            <label for="languageSelector">é€‰æ‹©è¯­è¨€:</label>
            <select class="language-selector" id="languageSelector">
                <option value="zh">ä¸­æ–‡</option>
                <option value="en">English</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="de">Deutsch</option>
                <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="fr">FranÃ§ais</option>
            </select>
        </div>
        
        <button class="test-button" onclick="runTest()">ğŸ” æ£€æŸ¥å½“å‰Metaæ ‡ç­¾</button>
        <button class="test-button" onclick="clearCache()">ğŸ—‘ï¸ æ¸…é™¤ç¼“å­˜å¹¶åˆ·æ–°</button>
        
        <div id="status" class="status"></div>
        
        <h2>å½“å‰é¡µé¢Metaä¿¡æ¯:</h2>
        <div id="metaInfo" class="meta-info"></div>
        
        <h2>æµ‹è¯•æ—¥å¿—:</h2>
        <div id="testLog" class="meta-info"></div>
    </div>

    <script src="seo-keywords.js"></script>
    <script>
        let currentLanguage = 'zh';
        let testLog = [];
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            testLog.unshift(`[${timestamp}] ${message}`);
            document.getElementById('testLog').textContent = testLog.slice(0, 10).join('\n');
        }
        
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
        }
        
        function updateMetaTags(lang) {
            log(`æ­£åœ¨æ›´æ–°è¯­è¨€: ${lang}`);
            
            const seoData = window.seoTranslations[lang];
            if (!seoData) {
                showStatus(`è¯­è¨€ ${lang} çš„SEOæ•°æ®ä¸å­˜åœ¨`, 'error');
                return false;
            }
            
            try {
                // æ›´æ–°HTML langå±æ€§
                document.documentElement.lang = seoData.htmlLang;
                log(`æ›´æ–°HTML lang: ${seoData.htmlLang}`);
                
                // æ›´æ–°é¡µé¢æ ‡é¢˜
                document.title = seoData.pageTitle;
                log(`æ›´æ–°æ ‡é¢˜: ${seoData.pageTitle}`);
                
                // æ›´æ–°metaæè¿°
                const metaDescription = document.querySelector('meta[name="description"]');
                if (metaDescription) {
                    metaDescription.setAttribute('content', seoData.metaDescription);
                    log(`æ›´æ–°æè¿°: ${seoData.metaDescription.substring(0, 50)}...`);
                }
                
                // æ›´æ–°metaå…³é”®è¯
                const metaKeywords = document.querySelector('meta[name="keywords"]');
                if (metaKeywords) {
                    metaKeywords.setAttribute('content', seoData.metaKeywords);
                    log(`æ›´æ–°å…³é”®è¯: ${seoData.metaKeywords.substring(0, 50)}...`);
                }
                
                // æ›´æ–°Open Graphæ ‡ç­¾
                const ogTitle = document.querySelector('meta[property="og:title"]');
                if (ogTitle) {
                    ogTitle.setAttribute('content', seoData.pageTitle);
                }
                
                const ogDescription = document.querySelector('meta[property="og:description"]');
                if (ogDescription) {
                    ogDescription.setAttribute('content', seoData.ogDescription);
                }
                
                const ogLocale = document.querySelector('meta[property="og:locale"]');
                if (ogLocale) {
                    ogLocale.setAttribute('content', seoData.ogLocale);
                }
                
                // æ›´æ–°Twitter Cardæ ‡ç­¾
                const twitterTitle = document.querySelector('meta[property="twitter:title"]');
                if (twitterTitle) {
                    twitterTitle.setAttribute('content', seoData.pageTitle);
                }
                
                const twitterDescription = document.querySelector('meta[property="twitter:description"]');
                if (twitterDescription) {
                    twitterDescription.setAttribute('content', seoData.twitterDescription);
                }
                
                showStatus(`âœ… æˆåŠŸæ›´æ–°ä¸º ${lang} è¯­è¨€çš„Metaæ ‡ç­¾`, 'success');
                log(`Metaæ ‡ç­¾æ›´æ–°å®Œæˆ`);
                return true;
                
            } catch (error) {
                showStatus(`âŒ æ›´æ–°Metaæ ‡ç­¾æ—¶å‡ºé”™: ${error.message}`, 'error');
                log(`é”™è¯¯: ${error.message}`);
                return false;
            }
        }
        
        function runTest() {
            const metaInfo = {
                htmlLang: document.documentElement.lang,
                title: document.title,
                description: document.querySelector('meta[name="description"]')?.content || 'æœªè®¾ç½®',
                keywords: document.querySelector('meta[name="keywords"]')?.content || 'æœªè®¾ç½®',
                ogTitle: document.querySelector('meta[property="og:title"]')?.content || 'æœªè®¾ç½®',
                ogDescription: document.querySelector('meta[property="og:description"]')?.content || 'æœªè®¾ç½®',
                ogLocale: document.querySelector('meta[property="og:locale"]')?.content || 'æœªè®¾ç½®'
            };
            
            const display = `å½“å‰è¯­è¨€: ${currentLanguage}
HTML Lang: ${metaInfo.htmlLang}
é¡µé¢æ ‡é¢˜: ${metaInfo.title}
æè¿°: ${metaInfo.description}
å…³é”®è¯: ${metaInfo.keywords}
OGæ ‡é¢˜: ${metaInfo.ogTitle}
OGæè¿°: ${metaInfo.ogDescription}
OGè¯­è¨€: ${metaInfo.ogLocale}`;
            
            document.getElementById('metaInfo').textContent = display;
            log('å½“å‰Metaä¿¡æ¯å·²æ˜¾ç¤º');
        }
        
        function clearCache() {
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                });
            }
            showStatus('ç¼“å­˜å·²æ¸…é™¤ï¼Œå³å°†åˆ·æ–°é¡µé¢...', 'warning');
            setTimeout(() => window.location.reload(true), 1000);
        }
        
        // è¯­è¨€é€‰æ‹©å™¨äº‹ä»¶
        document.getElementById('languageSelector').addEventListener('change', (e) => {
            currentLanguage = e.target.value;
            log(`è¯­è¨€åˆ‡æ¢åˆ°: ${currentLanguage}`);
            
            const success = updateMetaTags(currentLanguage);
            if (success) {
                setTimeout(runTest, 100); // å»¶è¿Ÿä¸€ç‚¹æ˜¾ç¤ºæ›´æ–°åçš„ä¿¡æ¯
            }
        });
        
        // é¡µé¢åŠ è½½æ—¶è¿è¡Œæµ‹è¯•
        window.addEventListener('load', () => {
            log('é¡µé¢åŠ è½½å®Œæˆ');
            runTest();
        });
    </script>
</body>
</html> 